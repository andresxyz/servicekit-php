/*! SUPERCAPA | (c) 2014 Telefonica S.A. | */
/* Contact: sergio.gordillogallardo@telefonica.com - joseluis.roblesurquiza@telefonica.com */

var SuperCapa=function(){function Y(){function G(b,a,c){var d=(a?a:"movistarDebug")+"__debug",e=!1;this.getId=function(){return a+""};this.start=function(){document.cookie=d+"=true; path=/";e=!0;console.log("___"+a+" V: "+c+"___");console.log("Versi\u00f3n del depurador: 1.966");return"Depuraci\u00f3n activada"};this.stop=function(){document.cookie=d+"=false; path=/";e=!1;console.log("___"+a+" V: "+c+"___");console.log("Versi\u00f3n del depurador: 1.966");return"Depuraci\u00f3n desactivada"};this.isOn=
function(){return e};this.getVersion=function(){return"1.966"};this.sendError=function(a,d){a.version=c;a.title=b;new R(a,d,this,this.getId()+"_Error")};e=function(){var a=document.cookie.split(d+"="),a=a&&1<a.length?a[1].split(";")[0]+"":"";return"true"==a?!0:!1}()}function R(b,a,c,d){function e(){function a(){if("undefined"==typeof _gaq&&-1==document.getElementsByTagName("head")[0].innerHTML.indexOf("ga.js")){window._gaq=window._gaq||[];_gaq.push(["_setAccount","UA-46169604-1"]);var c=document.createElement("script");
c.type="text/javascript";c.async=!0;c.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b);n&&n.isOn()&&console.log("Inserci\u00f3n explicita de ga.js: UA-46169604-1. No se encontraron instancias anteriores")}}function c(){"undefined"==typeof ga&&-1==document.getElementsByTagName("head")[0].innerHTML.indexOf("analytics.js")&&(function(a,c,b,d,e,n,p){a.GoogleAnalyticsObject=
e;a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)};a[e].l=1*new Date;n=c.createElement(b);p=c.getElementsByTagName(b)[0];n.async=1;n.src=d;p.parentNode.insertBefore(n,p)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-46169604-5","auto"),n&&n.isOn()&&console.log("Inserci\u00f3n explicita de analytics.js: UA-46169604-5. No se encontraron instancias anteriores"))}function b(c){try{null==e?("undefined"==typeof _gaq&&a(),_gaq.push(function(){n&&n.isOn()&&
console.log('Creaci\u00f3n del tracker (GA): "debug_error_tracker".');e=_gat._createTracker("UA-46169604-1","debug_error_tracker");"function"==typeof c&&c()})):"function"==typeof c&&c()}catch(d){console.log("Error conectando con GA"),console.debug(d)}}function d(a){try{null==h?("undefined"==typeof ga&&c(),ga(function(){n&&n.isOn()&&console.log('Creaci\u00f3n del tracker (UA): "debug_error_tracker".');ga("create",{trackingId:"UA-46169604-5",name:"debug_error_tracker"});h=ga.getByName("debug_error_tracker");
"function"==typeof a&&a()})):"function"==typeof a&&a()}catch(b){console.log("Error conectando con UA"),console.debug(b)}}var e=null,h=null;this.sendEvent=function(a,c,n){try{d(function(){h.send({hitType:"event",eventCategory:a,eventAction:c,eventLabel:n})})}catch(l){console.log("Error enviando a UA"),console.debug(l)}try{b(function(){e._trackEvent(a,c,n)})}catch(p){console.log("Error enviando a GA"),console.debug(p)}}}this.title=b.title?b.title:"GEN_ERROR";this.name=b.name;this.message=b.message;
this.code=b.code;this.objet=b.objet;this.error=b.error;this.version=b.version?"V: "+b.version:"";this.notif=0==a?!1:!0;var n=this.debug=c instanceof G?c:new G(this.constructor.name+"_debug");this.tipologia=d?d:"GEN_ERROR";if(this.notif)try{(new e).sendEvent("Seguimiento de errores",this.title+" | "+this.version+" | "+this.name+" | "+this.code+" | "+this.message+" | "+this.tipologia+" | Host-> "+window.location.host,"jQuery-> "+("undefined"!=typeof jQuery&&jQuery.fn&&jQuery.fn.jquery?jQuery.fn.jquery:
null)+" | Href-> "+window.location.href)}catch(h){}this.debug&&this.debug.isOn()&&(console.log("___"+this.tipologia+"___"),console.debug(this))}function aa(b){if(!b)return null;this.id=b;this.dias=Array(7);this.setDia=function(a,c){if(0>a||6<a||!(c instanceof Array)||1>c.length)return!1;for(var b=0;b<c.length;b++){var e=c[b];if(!(e instanceof Array)||2>e.length||e[0]>=e[1])return!1}this.dias[a]=c};this.removeDia=function(a){if(0>a||6<a)return!1;this.dias[a]=null};this.isActiva=function(){var a=new Date,
c=(a.getDay()+6)%7,a=a.getHours();if(c=this.dias[c])for(var b=0;b<c.length;b++){var e=c[b];if(e&&e[0]<=a&&e[1]>a)return!0}return!1};this.getVersion=function(){return"4.50"};this.isActivaServer=function(a){if(!$)return null;var c=this;$.post("//mov-utils-dot-mov-prod1.appspot.com/utils/date",function(b){var e=!1,n=null;if(b){n=new Date;n.setTime(b);var h=(n.getDay()+6)%7;b=n.getHours();if(h=c.dias[h])for(var p=0;p<h.length;p++){var B=h[p];B&&B[0]<=b&&B[1]>b&&(e=!0)}else e=!1}a(e,n)})}}function Q(){var b=
void 0!=superCapaVersion?superCapaVersion:"5.15";this.modalUrl=this.modalInfo=this.modalFormulario=null;var a=new oa;this.getVersion=function(){return b};this.getIdLeadFromCapaData=function(a){try{return a.sessionid.split("idlead=")[1].split("]")[0]}catch(b){}return null};this.capaExpresCallback=function(a,b){try{if(!b)return a.debug.sendError({name:"(critico)(ejecucion)",code:"SC.C2C.capa.c2ctagging_tealium",message:"La funci\u00f3n de callback de capa devuelve null"}),!1;if(!b.sessionid)return a.debug.sendError({name:"(critico)(ejecucion)",
code:"SC.C2C.capa.c2ctagging_tealium",message:"Error con la variable c2ctag.sessionid -> "+b.sessionid}),!1;var e="";2>b.sessionid.split("idlead=").length?(a.debug.sendError({name:"(critico)(ejecucion)",code:"SC.C2C.capa.c2ctagging_tealium",message:"No se ha recibido idLead por parte de CRM. Se recoger\u00e1 el generado por SuperCapa"}),e=F.getInstance().getLastIdLead()):e=this.getIdLeadFromCapaData(b);var n=D.getInstance().getFunnel(e);n&&n.next(b.phase,b)}catch(h){a.debug.sendError({name:"(critico)(ejecucion)(JavaScript)",
code:"SC.C2C.capa.execute",message:"Error JavaScript -> ("+h.message+") Metodo execute del C2C-> ("+a.getId()+")",error:h})}};this.addScript=function(a,b){if(!a)return!1;var e=this.mapToUrlParam(b);$("head").append('<script src="'+a+"?"+e+'">\x3c/script>')};this.addStyles=function(a,b){if(!a)return!1;var e=this.mapToUrlParam(b);$("head").append('<link type="text/css" rel="stylesheet" href="'+a+"?"+e+'"></link>')};this.loadScript=function(a,b){var e=document.createElement("script");e.type="text/javascript";
e.readyState?e.onreadystatechange=function(){if("loaded"==e.readyState||"complete"==e.readyState)e.onreadystatechange=null,b&&b()}:e.onload=function(){b&&b()};e.src=a;top.document.getElementsByTagName("head")[0].appendChild(e)};this.mapToUrlParam=function(a){if("object"!=typeof a)return"";var b="";jQuery.each(a,function(a,c){a&&c&&(b+=a+"="+c+"&")});return b=b.substring(0,b.length-1)};this.getCookie=function(a){return a?(a=document.cookie.split(a))&&1<a.length?(a=a[1].split(";")[0]+"",a=a.split("=")[1]):
"":""};this.setCookie=function(a,b){document.cookie=a+"="+b+"; path=/"};this.festivos={2014:{2:[1,4],3:[6,7]},2013:{1:[1,5],2:[1]}};this.isMobile=function(){return 480>$(window).width()};this.lanzaModalForm=function(a){this.modalFormulario=new ea("formularioC2C-modal","url",{url:"/estaticos/html/modal/modal-formulario-C2C.html"});this.modalFormulario.loadModal(function(){a&&a()})};this.lanzaModalInfo=function(a,b){var e={mensaje:a+""};this.modalInfo?this.modalInfo.closeC2CModal():this.modalInfo=new ea("info-modal",
"info",e);this.modalInfo.content=e;this.modalInfo.loadModal(function(){b&&b()})};this.normalizePath=function(a){a=new String(a);if(1>a.length)return"";for(;"/"==a.charAt(a.length-1)&&1<a.length;)a=a.substring(0,a.length-1);for(;"/"==a.charAt(0)&&1<a.length;)a=a.substring(1,a.length);return"/"!=a?"/"+a+"/":"/"};this.normalizaCapa=function(a){var b=a;if(a)0!=a.indexOf("#")&&(b="#"+a);else return"";return b};this.isExterna=function(){return!("www.movistar.es"==window.location.host||"col10mgmt.tsm.inet"==
window.location.host)};this.getParametroSC=function(a){return(a=this.getParametro(a))?a.split(":")[0]:a};this.getParametro=function(a){var b=window.location.href;try{a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==e?"":e[1]}catch(n){return""}};this.determinaBalanceo=function(a,b,e){if(!a||!b)return"";var n=0;for(e=0;e<a.length&&e<b.length;e++)n+=parseInt(b[e]);var n=parseInt(Math.random()*n),h=!1,p=0,B="",x=0;for(e=0;e<a.length&&!h&&
e<b.length;e++)B=a[e],x=parseInt(b[e]),p<=n&&n<x+p&&(h=!0),p+=x;return B};this.getValues=function(a){if(!a)return null;var b={};$(a).find("input, select").each(function(){var a=$(this).attr("name"),c="",c="checkbox"==$(this).attr("type")?$(this).prop("checked"):$(this).val();b[a]=c});return b};this.validarTelefono=function(a){return!a||9!=a.length||6!=a.substring(0,1)&&9!=a.substring(0,1)&&7!=a.substring(0,1)&&8!=a.substring(0,1)||-1==a.search(/^\d{1,}$/)?!1:!0};this.validarFormulario=function(b,
d){b=$(b);var e=this.getValues(b),n=!0;this.validarTelefono(e.telefono)?d&&b.find(".sc-error-telefono").html(""):(n=!1,d&&b.find(".sc-error-telefono").html(a.getError("errorTelefono")));e.politica?d&&b.find(".sc-error-politica").html(""):(n=!1,d&&b.find(".sc-error-politica").html(a.getError("errorPolitica")));return n}}function oa(){this.currentLanguage="esp";this.errores={esp:{errorTelefono:"Introduce un n\u00famero v\u00e1lido ",errorNombre:"Introduce tu nombre ",errorPolitica:"Acepta la pol\u00edtica de privacidad "},
eng:{errorTelefono:"Please, write a valid number ",errorNombre:"Please, write your name ",errorPolitica:"You must accept the Privacy Policy "},ger:{errorTelefono:"Fehler bei Feldvalidierung",errorNombre:"Bitte schreiben Sie ihren Namen ",errorPolitica:"Akzeptieren Sie bitte die Datenschutzbedingungen. "}};this.mensajes={esp:{mensajeOK:"<span>Muchas gracias por tu inter\u00e9s, te llamaremos en unos instantes</span>",mensajeKO:"<span>Lo sentimos. No hemos podido registrar tu solicitud. Int\u00e9ntelo de nuevo.</span>",
mensajeBLOCKED:"Espera, por favor, en unos instantes nos pondremos en contacto contigo",mensajeLATER:"En este momento no hay agentes disponibles, le atenderemos lo antes posible",mensajeCML:"<span>Muchas gracias por tu inter\u00e9s, te llamaremos en el horario que nos has indicado.</span>",mensajeENVIO:'<img src="http://www.movistar.es/estaticos/landings/img/common/loader-blue.gif"><span>&nbsp;Espera unos instantes, estamos procesando tu solicitud</span>'},eng:{mensajeOK:"Hola, muchas gracias por tu inter\u00e9s. Te llamaremos en unos instantes",
mensajeKO:"No disponible en este momento. Intentalo m\u00e1s tarde",mensajeBLOCKED:"Espera, por favor, en unos instantes nos pondremos en contacto contigo",mensajeLATER:"En este momento no hay agentes disponibles, le atenderemos lo antes posible",mensajeENVIO:"Hola, estamos procesando tu solicitud"},ger:{mensajeOK:"Hola, muchas gracias por tu inter\u00e9s. Te llamaremos en unos instantes",mensajeKO:"No disponible en este momento. Intentalo m\u00e1s tarde",mensajeBLOCKED:"Espera, por favor, en unos instantes nos pondremos en contacto contigo",
mensajeLATER:"En este momento no hay agentes disponibles, le atenderemos lo antes posible",mensajeENVIO:"Hola, estamos procesando tu solicitud"}};this.contenidoFormulario={esp:{mensajeFormulario:"Dejanos tus datos y te llamamos",inputNombre:"Nombre",inputTelefono:"Tel\u00e9fono",botonC2C:"Llamadme ahora"},eng:{mensajeFormulario:"Dejanos tus datos y te llamamos",inputNombre:"Nombre",inputTelefono:"Telefono",botonC2C:"Llamadme ahora"},ger:{mensajeFormulario:"Dejanos tus datos y te llamamos",inputNombre:"Ind\u00edcanos tu nombre",
inputTelefono:"Ind\u00edcanos tu telefono",botonC2C:"Llamadme ahora"}};this.getMensaje=function(b){var a="";if(!b)return"";this.currentLanguage||(this.currentLanguage="esp");this.mensajes&&this.mensajes[this.currentLanguage]&&(a=this.mensajes[this.currentLanguage][b]);return a};this.getError=function(b){var a="";if(!b)return"";this.currentLanguage||(this.currentLanguage="esp");this.errores&&this.errores[this.currentLanguage]&&(a=this.errores[this.currentLanguage][b]);return a};this.getContenidoFormulario=
function(b){var a="";if(!b)return"";this.currentLanguage||(this.currentLanguage="esp");this.contenidoFormulario&&this.contenidoFormulario[this.currentLanguage]&&(a=this.contenidoFormulario[this.currentLanguage][b]);return a}}function ea(b,a,c){var d=void 0!=superCapaVersion?superCapaVersion:"5.30",e=null,n=!1,h=b||"",p="";h&&(p="#"+h);var B=a||"";this.content=c||{};var x={info:'<link rel="stylesheet" href="//www.movistar.es/estaticos/html/modal/css/c2c-modal-gen-v2.css"><div class="c2c-modal" id="modal-c2c"><div class="c2c-modal-container"><div class="c2c-modal-body"><div class="mod-header mod-section"><div class="mod-row"><div class="mod-col-xs-10"><img style="width:30%;" src="http://www.movistar.es/estaticos/landings/img/common/logo-movistar.png"></div><div class="mod-col-xs-2"><a class="mod-close c2c-btn-close" href="javascript:void(0);">X</a></div></div></div><div class="mod-content mod-section"><div class="mod-row"><div class="mod-col-xs-12"><div class="mod-separador"><div class="mod-title"><h1>Servicio de Atenci&oacute;n Online</h1></div></div></div></div></div><div class="mod-content mod-section"><div class="mod-row"><div class="mod-col-xs-12"><div class="c2c-modal-mensaje"></div></div></div></div><div class="mod-footer mod-section"><div class="mod-row"></div></div></div></div></div><script>var body = document.body,html = document.documentElement;var height = Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );var Dtop = (window.pageYOffset || html.scrollTop)  - (html.clientTop || 0);document.getElementsByClassName("c2c-modal")[0].style.height = height+"px";document.getElementsByClassName("c2c-modal")[0].style.paddingTop = Dtop+"px";\x3c/script>',
url:'<div class="c2c-modal" id="modal-c2c" tabindex="-1" role="dialog"><div class="c2c-modal-container"><div class="c2c-modal-body"><div class="c2c-modal-mensaje"></div></div></div></div>'};this.closeC2CModal=function(a){1==a?$(p+".c2c-modal").fadeOut(function(){$(p+".c2c-modal").remove();n=!1}):$(p+".c2c-modal").fadeOut()};this.startModal=function(){if(e){var a=this;e.fadeIn();e.find(".c2c-btn-close").click(function(){a.closeC2CModal(!1)});$(document).keyup(function(b){27===b.keyCode&&a.closeC2CModal(!1)});
a.content&&a.content.mensaje&&e.find(".c2c-modal-mensaje").html(a.content.mensaje);screen.height<e.find(".c2c-modal-container").height()&&(e.find(".c2c-modal-body").height(screen.height),e.find(".c2c-modal-body").css("overflow-y","scroll"));return $(p+".c2c-modal")}};this.loadModal=function(a){var b=this;if(0!=n&&e)b.startModal(),a&&a();else{var c=x[B];c&&($(".c2c-modal").remove(),$("body").append(c),$("#modal-c2c").attr("id",h),e=$(p+".c2c-modal"),"url"==B&&b.content.url?$.post(b.content.url,function(c){e.find(".c2c-modal-mensaje").append(c);
a&&a();n=!0;b.startModal()}):(a&&a(),n=!0,b.startModal()))}};this.getId=function(){return h+""};this.getVersion=function(){return d}}function L(b,a,c,d){var e=null,n=void 0!=superCapaVersion?superCapaVersion:"5.110";this.debug=null;try{this.debug=new G("SC-ERROR",this.constructor.name,n)}catch(h){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(h))}this.getId=function(){return b};this.getUrlParamName=
function(){return a};this.getC2C=function(){return c};this.getTelefono=function(){return d&&this.isTelefonoActivo()?d+"":null};this.setFranjaTelefono=function(a){null==a?e=null:a instanceof aa&&(e=a)};e=new aa("franja900");e.setDia(0,[[8,23]]);e.setDia(1,[[8,23]]);e.setDia(2,[[8,23]]);e.setDia(3,[[8,23]]);e.setDia(4,[[8,23]]);e.setDia(5,[[8,23]]);e.setDia(6,[[8,23]]);this.isTelefonoActivo=function(){return d&&(null==e||e.isActiva())};this.start=function(){try{c?c.start():this.debug.sendError({name:"(informativo)(inicializacion)",
code:"SC.Campania.init",message:"No hay ning\u00fan C2C para la campania "+this.getId()}),this.isTelefonoActivo()?($(" .sc-telefono").html(d),$(" a.sc-telefono").attr("href","tel:"+d),$(" .sc-oculto-900Activo").hide(),$(" .sc-visible-900Activo").show()):($(" .sc-oculto-900Activo").show(),$(" .sc-visible-900Activo").hide())}catch(a){this.debug.sendError({name:"(critico)(sc-inicializacion)(JavaScript)",code:"SC.Campania.start",message:"Error JavaScript. Name -> "+a.name+" | Message -> "+a.message,error:a},
!0)}}}function pa(){var b=D.getInstance(),a=b.creaEstado("CALL SEND"),c=b.creaEstado("CALL NOT ESTABLISHED"),d=b.creaEstado("AGENT ANSWER"),e=b.creaEstado("CLIENT ANSWER"),n=b.creaEstado("CALL END"),h=b.creaEstado("SURVEY SEND"),p=b.creaEstado("C2C FEND"),B=b.creaEstado("CALL VALIDATION FAILED"),x=b.creaEstado("CML SEND"),b=b.getEstado("CML LOAD");a.addHijo(c);a.addHijo(d);a.addHijo(B);d.addHijo(c);d.addHijo(e);c.addHijo(b);B.addHijo(x);e.addHijo(n);n.addHijo(h);h.addHijo(p);return a}function Y(){var b=
D.getInstance(),a=b.creaFunnel("CMNC Expres",pa());a.addEscape(b.creaEstado("GENERIC FAILURE"));a.addEscape(b.creaEstado("C2C FEND"));a.addEscape(b.creaEstado("CALL VALIDATION FAILED"));return a}function qa(){var b=D.getInstance(),a=b.creaEstado("CML SEND"),c=b.creaEstado("CML FAILED"),d=b.creaEstado("CML END"),b=b.creaEstado("C2C FEND");a.addHijo(c);a.addHijo(d);d.addHijo(b);return a}function Aa(){var b=D.getInstance(),a=b.creaFunnel("CMLC Expres",qa());a.addEscape(b.creaEstado("GENERIC FAILURE"));
a.addEscape(b.creaEstado("C2C FEND"));a.addEscape(b.creaEstado("CML VALIDATION FAILED"));return a}function Ba(){var b=D.getInstance(),a=b.getEstado("PETICION CAPA");if(!a){var c=D.getInstance(),a=c.creaEstado("PETICION CAPA"),d=c.creaEstado("C2C INIT"),e=c.creaEstado("CALL LOAD"),n=c.creaEstado("CALL VALIDATION FAILED"),h=pa(),p=c.creaEstado("CML LOAD"),c=c.creaEstado("CML VALIDATION FAILED"),B=qa();a.addHijo(d);d.addHijo(e);e.addHijo(n);e.addHijo(h);n.addHijo(p);d.addHijo(p);p.addHijo(c);p.addHijo(B);
d.addHijo(n)}a=b.creaFunnel("Completo_Capa",a);a.addEscape(b.creaEstado("GENERIC FAILURE"));a.addEscape(b.creaEstado("C2C FEND"));return a}function Ca(){var b=D.getInstance(),a=b.creaEstado("SEND_NEOTEC");a.addHijo(b.creaEstado("OK_NEOTEC"));a.addHijo(b.creaEstado("KO_NEOTEC"));a.addHijo(b.creaEstado("BLOCKED_NEOTEC"));a=b.creaFunnel("funnelNeotec",a);a.addEscape(b.creaEstado("CALLBACK_ERROR"));return a}function Da(){var b=D.getInstance(),a=b.creaEstado("SEND_VACOLBA");a.addHijo(b.creaEstado("OK_VACOLBA"));
a.addHijo(b.creaEstado("KO_VACOLBA"));a=b.creaFunnel("funnelVacolba",a);a.addEscape(b.creaEstado("CALLBACK_ERROR"));return a}function Ea(){var b=new Q,a=new oa,c=D.getInstance();c.creaEstado("OK_NEOTEC").addFuncionalidad(function(){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeOK"))});c.creaEstado("KO_NEOTEC").addFuncionalidad(function(){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeKO"))});c.creaEstado("BLOCKED_NEOTEC").addFuncionalidad(function(){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeBLOCKED"))});
c.creaEstado("OK_VACOLBA").addFuncionalidad(function(){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeOK"))});c.creaEstado("KO_VACOLBA").addFuncionalidad(function(){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeKO"))});var d=c.creaEstado("C2C INIT");d.addFuncionalidad(function(a,b,c){});d=c.creaEstado("CALL SEND");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeENVIO"))});d=c.creaEstado("CML SEND");d.addFuncionalidad(function(c,d,
h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeENVIO"))});d=c.creaEstado("AGENT ANSWER");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeOK"))});d=c.creaEstado("CLIENT ANSWER");d.addFuncionalidad(function(a,b,c){dataLayerGTM.push({"c2c.product":window.s.products,"c2c.supplier":c.provider,"c2c.idLead":a,event:"c2cCA"})});d=c.creaEstado("CML END");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeCML"))});
d=c.creaEstado("CALL VALIDATION FAILED");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeKO"))});d=c.creaEstado("CML VALIDATION FAILED");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeKO"))});d=c.creaEstado("CALL NOT ESTABLISHED");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeKO"))});d=c.creaEstado("CML FAILED");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&
b.lanzaModalInfo(a.getMensaje("mensajeKO"))});d=c.creaEstado("GENERIC FAILURE");d.addFuncionalidad(function(c,d,h){SC.isModalActivo()&&b.lanzaModalInfo(a.getMensaje("mensajeKO"))})}function fa(b,a,c,d){var e=void 0!=d||null!=d?d:{};d=null;var n=provider=workplace="",h="",p="null/null";try{"undefined"!=typeof e.sessionid&&(a=e.sessionid);"undefined"!=typeof e.idu&&(n=e.idu);"undefined"!=typeof e.provider&&(provider=e.provider);"undefined"!=typeof e.workplace&&(workplace=e.workplace);q&&q instanceof
L&&null!=q.getC2C()&&(h=q.getC2C().getParametro());if(s&&s.products){var p=s.products.split(";",2),B=e="null";p[0]&&(e=p[0]);p[1]&&(B=p[1]);p=e+"/"+B}TG.setTaggerDimension(43,h,"Alias_CRM",3);TG.setTaggerDimension(42,n,"Codigo cliente",3);TG.setTaggerDimension(22,a,"Identificador de sesion",3);TG.setTaggerDimension(25,b,"Flujo de Conversion",3);TG.setTaggerDimension(36,"tagger:C2C:SC:"+b+":"+c+":"+provider+":"+workplace,"Transformador C2C",3);TG.virtualizePage(p+"/"+b+"/"+c+"/"+p,"",[43]);d=TG.setTaggerEvent("Flujo_C2_CCRM",
"Evento Asincrono C2C","tagger:C2C:SC:"+b+":"+c+":"+provider+":"+workplace,window.s.products,null,null,[11,42,22,25,36,50,43]);d.execute()}catch(x){H&&H.sendError({name:"(critico)(inicializacion)(JavaScript)",code:"SC.sc-config.taguearFlujoCRM",message:"Error JavaScript. Name -> "+x.name+" | Message -> "+x.message,error:x},!0)}}function ra(b,a,c){try{TG.virtualizePage(b+"/"+c),TG.setTaggerDimension(22,a,"Identificador de sesion",3),TG.setTaggerDimension(25,b,"Flujo de Conversion",3),TG.setTaggerDimension(36,
"tagger:C2C:SC:"+b+":"+c,"Transformador C2C",3),tgEvent=TG.setTaggerEvent("Flujo_C2C_Simple","Evento Asincrono C2C","tagger:C2C:SC:"+b+":"+c,window.s.products,null,null,[11,22,25,36,50]),tgEvent.execute()}catch(d){H&&H.sendError({name:"(critico)(inicializacion)(JavaScript)",code:"SC.sc-config.taguearFlujoCRM",message:"Error JavaScript. Name -> "+d.name+" | Message -> "+d.message,error:d},!0)}}function sa(b){try{var a=new Fa;a.setPublicKey("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCuFAp6T5WBHKR/3jlhuK+7R3oEuK5I3jqXTYIe/kZBGmCGYx3w0G1G8HYUZfs/6kKVcry55RWTHyX1ON5ROG3mOSwmyGt9R2PKipZCwsEfupo/Lza3w6hU3msWYqE2WzNU4zH7h1iemhtn4Wi6uVnnJ3FhIjti/fyo4AyxUeyGpwIDAQAB");
b.userName=a.encrypt(b.userName);b.userPhone=a.encrypt(b.userPhone);$.post("https://api-movistar.appspot.com/rsc/sc",b)}catch(c){H&&H.sendError({name:"(informativo)(inicializacion)(JavaScript)",code:"SC.sc-config.sendToServer",message:"Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}}function Ga(){var b=D.getInstance();b.creaTipologiaFunnel("cmn_capaExpres",Y).addFuncionalidad(function(a,b,d){fa("capa-crm-expres-cmn",a,b,d);a={idLead:a,alias:q.getC2C().getParametro(),userName:d.nombre,
userPhone:d.telefono,status:b,callBackFunction:"SC_ServerCallBack"};sa(a)});b.creaTipologiaFunnel("cml_capaExpres",Aa).addFuncionalidad(function(a,b,d){fa("capa-crm-expres-cml",a,b,d);a={idLead:a,alias:q.getC2C().getParametro(),userName:d.nombre,userPhone:d.telefono,status:b,callBackFunction:"SC_ServerCallBack"};sa(a)});b.creaTipologiaFunnel("completo_capa",Ba).addFuncionalidad(function(a,b,d){fa("capa-crm-completo",a,b,d)});b.creaTipologiaFunnel("cmn_neotec",Ca).addFuncionalidad(function(a,b,d){ra("directo-neotec-cmn",
a,b)});b.creaTipologiaFunnel("cmn_vacolba",Da).addFuncionalidad(function(a,b,d){ra("directo-vacolba-cmn",a,b)});Ea()}function Ha(b){function a(a,b,e){if(a.getParametro())return window.c2ctagging=function(b){b.idc2c=a.getId();c.capaExpresCallback(a,b)},window.venta_asistida_externo.idlead=F.getInstance().getLastIdLead(),window.venta_asistida_externo.alias=a.getParametro(),window.venta_asistida_externo.start(),!0;a.debug.sendError({name:"(critico) (sc-ejecucion)",code:"SC.C2C.capa.execute",message:"Falta el parametro alias para este C2C con id == "+
a.getId()});return!1}var c=new Q,d=function(a,b,e){var d=(a.getParametro()||"").toLowerCase(),n=F.getInstance().getLastIdLead();if(b&&b.telefono){var h="";b.nombre&&(h=b.nombre.replace(/ /g,"_"));var S=c.normalizePath(window.location.pathname+"").split("/"),S=S[S.length-2],q=SuperCapa.getInstance();q&&q.getIdCampania()&&(S=S+":"+q.getUrlParamName()+":"+q.getIdCampania());(e=c.mapToUrlParam(e))||(e="");$.ajax({type:"POST",url:"//query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{diagnostics:"true",
format:"json",q:"select * from json where url='http://www.neotec.es/c2ctelefonica?campana="+S+"&oferta="+d+"&numero="+b.telefono+"&nombre="+h+"&idsesion="+n+"&"+e+"'"}}).complete(function(b,c){try{var e=D.getInstance().getFunnel(n),d=(b.responseJSON.query.results.resultado+"").toLowerCase();"ok"==d?e.next("OK_NEOTEC"):"ko"==d?e.next("KO_NEOTEC"):"blocked"==d?e.next("BLOCKED_NEOTEC"):e.next("CALLBACK_ERROR")}catch(h){a.debug.sendError({name:"(critico) (javascript)",code:"SC.C2C.neotec.execute",message:"Error JavaScript -> ("+
h.message+") Metodo execute del C2C-> ("+a.getId()+") IdLead -> ("+n+")",error:h})}});return!0}a.debug.sendError({name:"(critico) (javascript)",code:"SC.C2C.neotec.execute",message:"Faltan parametros obligatorios"});return!1},e=function(a,b,e){e=F.getInstance().getLastIdLead();if(b&&b.telefono)return c.addScript("//www.ofertamovistar.es/form_action/contact",{number:b.telefono,name:b.nombre,product:window.s.products,page:window.s.pageName,sessionid:e}),!0;a.debug.sendError({name:"(critico) (javascript)",
code:"SC.C2C.neotec.execute",message:"Faltan parametros obligatorios"});return!1},n=function(a,b,e,d){if(!a.getParametro())return a.debug.sendError({name:"(critico) (sc-ejecucion)",code:"SC.C2C.capaExpres.execute",message:"Falta el parametro alias para este C2C con id == "+a.getId()}),!1;if(b&&b.telefono)return window.c2cexpress=function(e){e.nombre=b.nombre?b.nombre:"";e.telefono=b.telefono;e.idc2c=a.getId();c.capaExpresCallback(a,e)},window.venta_asistida_externo.landing_c2cexpress(d),!0;a.debug.sendError({name:"(critico) (javascript)",
code:"SC.C2C.capaExpres.execute",message:"Faltan parametros obligatorios"});return!1};b=function(a,b,c){var e={},d=b.telefono?b.telefono:"",h=b.telefonoGestion?b.telefonoGestion:"";e.alias=a.getParametro();e.idlead=F.getInstance().getLastIdLead();e.operation="CALL SEND";e.phone=d;e.calldata={clientphonecontact:d,clientphonemgmt:h};n(a,b,c,e)};var h=function(a,b,c){var e={},d=b.telefono?b.telefono:"",h=b.telefonoGestion?b.telefonoGestion:"",q=b.nombre?b.nombre:"",da=b.apellido,y=b.fecha,l=b.hora;e.alias=
a.getParametro();e.idlead=F.getInstance().getLastIdLead();e.operation="CML SEND";e.cmldata={clientphonecontact:d,clientphonemgmt:h,clientname:q,clientsurname:da,scheduledate:y,scheduletime:l};n(a,b,c,e)},e=F.getInstance().creaC2C("vacolba",{cmn:e},{cmn:e});e.setAceptaFuncionalidad("cmn",!0);e.setTipologiasFunnel({cmn:"cmn_vacolba"});d=F.getInstance().creaC2C("neotec",{cmn:d},{cmn:d});d.setAceptaFuncionalidad("cmn",!0);d.setTipologiasFunnel({cmn:"cmn_neotec"});d=F.getInstance().creaC2C("capa",{completo:a},
{completo:a});d.setAceptaFuncionalidad("completo",!0);d.setTipologiasFunnel({completo:"completo_capa"});b=F.getInstance().creaC2C("capaExpres",{cmn:b,cml:h},{cmn:b,cml:h});b.setAceptaFuncionalidad("cmn",!0);b.setAceptaFuncionalidad("cml",!0);b.setTipologiasFunnel({cmn:"cmn_capaExpres",cml:"cml_capaExpres"})}var ha=superCapaVersion="5.416";if("undefined"==typeof Tagger||"function"!=typeof Tagger.getInstance||"object"!=typeof Tagger.getInstance())window.Tagger=function(){function b(a){function b(a,
c,e,d){e=e?e:"";d=d?d:3;this.getName=function(){return e};this.getScope=function(){return d};this.getDimension=function(){return parseInt(a)};this.getValue=function(){try{return"function"==typeof c?c():c}catch(b){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerDimension.getValue",message:"Dimension -> "+a+". Error JavaScript. Name -> "+b.name+" | Message -> "+b.message,error:b},!0)}return null};this.toGA=function(){(function(a){y.onConnectReady(function(){try{E._setCustomVar(a.getDimension(),
a.getName(),a.getValue(),a.getScope())}catch(b){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerDimension.toGA",message:"Error JavaScript. Name -> "+b.name+" | Message -> "+b.message,error:b},!0)}})})(this)};this.toUA=function(){(function(a){y.onConnectReady(function(){try{z.set("dimension"+a.getDimension(),a.getValue())}catch(b){return l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerDimension.toUA",message:"Error JavaScript. Name -> "+b.name+
" | Message -> "+b.message,error:b},!0),!1}})})(this)};this.checkVar=function(){var b=!0;if("number"!=typeof a||0>a)b=!1,l&&l.isOn()&&(console.log("Variable g_dimension incorrecta: "),console.debug(a));return b};if(!this.checkVar())throw{name:"Error con los parametros",message:"Error con las variables pasadas para la creaci\u00f3n del objeto TaggerDimension"};}function c(a,d,h,t,A){var w={},p={};this.copy=function(){var b=new c(a,d,h,t,A),e;for(e in w)b.insertTaggerDimension(e);for(e in p)b.insertCustomDimension(p[e]);
return b};this.getCategory=function(){return a};this.getAction=function(){try{var b="function"==typeof d?d():d;return b?b:null}catch(c){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerEvent.getAction",message:"Category -> "+a+". Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}return null};this.getLabel=function(){try{var b="function"==typeof h?h():h;return b?b:null}catch(c){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerEvent.getLabel",
message:"Category -> "+a+". Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}return null};this.setLabel=function(a){h=a};this.getValue=function(){try{var b="function"==typeof t?t():t;return"number"==typeof b&&0<=b?b:null}catch(c){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerEvent.getValue",message:"Category -> "+a+". Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}return null};this.insertTaggerDimension=function(b){try{if("number"==
typeof b||"string"==typeof b)return w[b+""]=!0;if("undefined"!=typeof b&&b instanceof Array){for(var c=0;c<b.length;c++)w[b[c]+""]=!0;return!0}}catch(e){l&&l.sendError({name:"(informativo)(sc-ejecucion)(JavaScript)",code:"TG.TaggerEvent.insertarTaggerDimension",message:"Category -> "+a+". Error JavaScript. Name -> "+e.name+" | Message -> "+e.message,error:e},!0)}return!1};this.insertCustomDimension=function(c){try{if(!(c&&c instanceof b))return!1;p[c.getDimension()]=c;return!0}catch(d){l&&l.sendError({name:"(informativo)(sc-ejecucion)(JavaScript)",
code:"TG.TaggerEvent.insertCustomDimension",message:"Category -> "+a+". Error JavaScript. Name -> "+d.name+" | Message -> "+d.message,error:d},!0)}return!1};this.execute=function(a,c){(function(a,r,g){y.onConnectReady(function(){try{a.insertTaggerDimension(67);if(l&&l.isOn()){console.log("SEND EVENT:|Category: "+a.getCategory());console.log("           |Action:   "+a.getAction());console.log("           |Label:    "+a.getLabel());var f={},u;for(u in p){var k=p[u];k instanceof b&&(f[k.getDimension()]=
k.getValue())}if(r instanceof Array)for(u in r)k=r[u],k instanceof b&&(f[k.getDimension()]=k.getValue());for(var M in w)(k=y.getTaggerDimension(M))&&k.getValue()&&(f[M]=k.getValue());console.debug(f)}f="";g&&(f=E._get("page"))&&y.setPage(g);S();for(u in p)k=p[u],k instanceof b&&k.toGA();if(r instanceof Array)for(u in r)k=r[u],k instanceof b&&k.toGA();for(M in w)k=y.getTaggerDimension(M),k instanceof b&&k.toGA();a.toGA();var m={};for(u in p)k=p[u],k instanceof b&&(m["dimension"+k.getDimension()]=k.getValue()+
"");if(r instanceof Array)for(u in r)k=r[u],k instanceof b&&(m["dimension"+k.getDimension()]=k.getValue()+"");for(M in w)k=y.getTaggerDimension(M),k instanceof b&&k.getValue()&&(m["dimension"+M]=k.getValue()+"");a.toUA(m);g&&f&&y.setPage(f)}catch(c){l&&l.sendError({name:"(critico)(sc-ejecucion)(JavaScript)",code:"TG.TaggerEvent.execute",message:"Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}})})(this,a,c)};this.toGA=function(){(function(a){y.onConnectReady(function(){try{E._trackEvent(a.getCategory(),
a.getAction(),a.getLabel(),a.getValue())}catch(b){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerEvent.toGA",message:"Error JavaScript. Name -> "+b.name+" | Message -> "+b.message,error:b},!0)}})})(this)};this.toUA=function(b,c){try{var e={hitType:"event",eventCategory:this.getCategory(),eventAction:this.getAction()},r=this.getLabel(),g=this.getValue();null!=r&&(e.eventLabel=r);null!=g&&(e.eventValue=g);if("object"==typeof b)for(var f in b)e[f]=b[f];if("object"==typeof c)for(f in c)e[f]=
c[f];(function(r){y.onConnectReady(function(){try{z.send(r)}catch(g){return l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerEvent.toUA",message:"Error JavaScript. Name -> "+g.name+" | Message -> "+g.message,error:g},!0),!1}})})(e)}catch(u){return l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.TaggerEvent.toUA",message:"Category -> "+a+". Error JavaScript. Name -> "+u.name+" | Message -> "+u.message,error:u},!0),!1}return!0};this.checkVar=function(){var b=
!0;"string"==typeof a&&a||(b=!1,l&&l.isOn()&&(console.log("Variable category incorrecta: "),console.debug(a)));"function"!=typeof d&&"string"!=typeof d&&(b=!1,l&&l.isOn()&&(console.log("Variable action incorrecta: "),console.debug(d)));return b};if(!this.checkVar())throw{name:"Error con los parametros",message:"Error con las variables pasadas para la creaci\u00f3n del objeto TaggeEvent"};}function h(){function a(c){try{if(!c)return null;var d=$(c).attr("tg-dimensions");c=[];if(!d)return null;var d=
d.split(";"),l;for(l in d){var n=d[l];if(n){var t=n.split(":",2);if(2==t.length&&t[1]){var r=parseInt(t[0]),g=new b(r,t[1],"InlineTagging",3);c.push(g)}else h&&h.sendError({name:"(informativo)(inicializacion)",code:"TaggerInline.get_tg_dimensions",message:"tg-dimensions mal formado: "+n},!0)}}return c}catch(f){h&&h.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"TaggerInline.get_tg_dimensions",message:"Error JavaScript. Name -> "+f.name+" | Message -> "+f.message,error:f},!0)}return null}
function d(b,e,l){try{if(!b)return!1;b=$(b);if("true"!=b.attr("tg-enabled"))return!1;var t=b.attr("tg-virtualPage"),p=a(b),r=y.getTaggerEvent(e);r instanceof c?(r.getLabel()||r.setLabel(l),r.execute(p,t)):h&&h.sendError({name:"(informativo)(ejecucion)",code:"TaggerInline.executeInlineElem",message:"Evento no registrado en tagger"},!0)}catch(g){h&&h.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"TaggerInline.executeInlineElem",message:"Error JavaScript. Name -> "+g.name+" | Message -> "+
g.message,error:g},!0)}}var l={click:function(a,b,c){(function(a,b,r){$(a).click(function(){d(this,b,r)})})(a,b,c)},load:function(a,b,c){d($(a),b,c)},visible:function(a,b,c){$(a).is(":visible")&&d($(a),b,c)}},h=null;try{h=new G("TG-ERROR","TaggerInline",y.getVersion())}catch(t){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(t))}this.init=function(b){try{("undefined"!=typeof b?$(b).find("[tg-enabled='true']"):
$("body").find("[tg-enabled='true']")).each(function(b,c){try{var e=$(c).attr("tg-virtualizePage");if(e){h&&h.isOn()&&console.log("INLINE VIRTUALIZE PAGE:|Page:      "+e);var r=a(c);y.virtualizePage(e,null,null,r)}}catch(g){h&&h.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"TaggerInline.virtualizePage",message:"Error JavaScript. Name -> "+g.name+" | Message -> "+g.message,error:g},!0)}try{var f=$(c).attr("tg-events");if(f){var f=f.split(";"),u;for(u in f){var k=f[u];if(k){var M=k.split(":",
3);if(2<=M.length){var m=M[0],ta=M[1],d=M[2],n=l[ta];"function"==typeof n?(h&&h.isOn()&&(console.log("INLINE EVENT:|TaggerId:      "+m),console.log("             |TaggerTrigger: "+ta),console.log("             |CustomLabel:   "+d)),n($(c),m,d)):h&&h.sendError({name:"(informativo)(inicializacion)",code:"TaggerInline.prepareEvents",message:"Error con el disparador, disparador no contemplado: "+M[1]},!0)}else h&&h.sendError({name:"(informativo)(inicializacion)",code:"TaggerInline.prepareEvents",message:"Error formato tg-events inline: "+
k},!0)}}}}catch(t){h&&h.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"TaggerInline.prepareEvents",message:"Error JavaScript. Name -> "+t.name+" | Message -> "+t.message,error:t},!0)}})}catch(c){h&&h.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TaggerInline.init",message:"Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}};this.startDebug=function(){h.start()};this.stopDebug=function(){h.stop()}}function p(a,d){var l=null;try{l=new G("TG-ERROR","TaggerHot",
y.getVersion())}catch(h){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(h))}this.startDebug=function(){l.start()};this.stoptDebug=function(){l.stop()};this.init=function(){if("object"==typeof d){var h=null;l&&l.isOn()&&console.log("HOT DIMENSIONS:");for(var t in d){var p=Number(t),A=d[t];(h=y.setTaggerDimension(p,A))&&l&&l.isOn()&&console.log("           |Index:    "+p+" Value: "+A)}}if("object"==
typeof a)for(var x in a)if(h=a[x],t=y.setTaggerEvent(x,h.category,h.action,h.label,h.value,null,h.predefinedDimensions),t instanceof c&&"object"==typeof h.customDimensions){l&&l.isOn()&&(console.log("HOT EVENT: |TaggerId:    "+x),console.log("           |Category:    "+h.category),console.log("           |Action:      "+h.action),console.log("           |Label:       "+h.label),console.log("           |Value:       "+h.value),console.log("           |predefDimensions:     "+h.predefinedDimensions),
console.log("           |customDimensions:     "));for(var B in h.customDimensions)p=h.customDimensions[B],A=new b(Number(B),p),t.insertCustomDimension(A),l&&l.isOn()&&console.log("                  | Index: "+Number(B)+" Value: "+p)}}}function B(){if("undefined"==typeof _gaq&&-1==document.getElementsByTagName("head")[0].innerHTML.indexOf("ga.js")){window._gaq=window._gaq||[];_gaq.push(["_setAccount",A]);var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?
"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);l&&l.isOn()&&console.log("Inserci\u00f3n explicita de ga.js: "+A+". No se encontraron instancias anteriores")}}function x(){"undefined"==typeof ga&&-1==document.getElementsByTagName("head")[0].innerHTML.indexOf("analytics.js")&&(function(a,b,c,e,d,h,l){a.GoogleAnalyticsObject=d;a[d]=a[d]||function(){(a[d].q=a[d].q||[]).push(arguments)};a[d].l=1*new Date;h=b.createElement(c);
l=b.getElementsByTagName(c)[0];h.async=1;h.src=e;l.parentNode.insertBefore(h,l)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-46169604-5","auto"),l&&l.isOn()&&console.log("Inserci\u00f3n explicita de analytics.js: UA-46169604-5. No se encontraron instancias anteriores"))}function q(){try{null==E&&("undefined"==typeof _gaq&&B(),I||(I=!0,_gaq.push(function(){var a;a=_gat._getTrackerByName()._getAccount();t[a]||(a=A);E=_gat._createTracker(a,T);l&&l.isOn()&&
console.log('Creado tracker (GA): "'+T+'" idGA: "'+a+'".');z&&na()})))}catch(a){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.Tagger.initConexionGA",message:"Conexion con GA. Error JavaScript. Name -> "+a.name+" | Message -> "+a.message,error:a},!0)}}function za(){try{null==z&&("undefined"==typeof ga&&x(),C||(C=!0,ga(function(){z=ga.getByName(T);if(!z){var a=ga.getByName("t0")?ga.getByName("t0").get("trackingId"):"UA-46169604-5";Ia[a]||(a="UA-46169604-5");ga("create",{trackingId:a,
name:T});z=ga.getByName(T);l&&l.isOn()&&console.log('Creado tracker (UA): "'+T+'" idUA: "'+a+'".');E&&na()}})))}catch(a){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.Tagger.initConexionUA",message:"Conexion con UA. Error JavaScript. Name -> "+a.name+" | Message -> "+a.message,error:a},!0)}}function na(){l&&l.isOn()&&console.log("Vaciar cola de ejecuci\u00f3n -> "+F.length+" elementos en cola");for(var a=F.shift();"undefined"!=typeof a;a=F.shift())if("function"==typeof a)try{a()}catch(b){l&&
l.sendError({name:"(informativo)(ejecucion)",code:"TG.Tagger.vaciarCola",message:"Error ejecutando funcion.  Error JavaScript ejecutando funcion de la pila. Name -> "+b.name+" | Message -> "+b.message+". Se intentar\u00e1 continuar con la ejecuci\u00f3n"},!0)}}function S(){y.onConnectReady(function(){for(var a=1;50>=a;a++)E._deleteCustomVar(a)})}function da(a){return window.location.pathname+("/"==window.location.pathname[window.location.pathname.length-1]?"virtual/":"/virtual/")+a}var y=null,l=null;
try{l=new G("TG-ERROR","Tagger","2.212")}catch(ya){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(ya))}var E=null,z=null,A="UA-46169604-1",t={"UA-46169604-1":!0},Ia={"UA-46169604-5":!0},T="tg_tracker",I=!1,C=!1;if(1==a)try{(l=new G("TG-ERROR","Tagger_developer","2.212"))&&l.isOn()&&(console.log("*****************************************"),console.log("             DEVELOPMENT MODE            "),
console.log("*****************************************")),A="UA-46169604-3",t={idGA_develop:!0},T="tg_develop_tracker"}catch(D){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.Tagger.initDevelopmentVars",message:"Error JavaScript. Name -> "+D.name+" | Message -> "+D.message,error:D},!0)}var J={},K={},F=[],H=!1;l&&l.isOn()&&(console.log("___TAGGER V: 2.212___"),console.log("SINGLE TAGGER INSTANCE"));return y={setTaggerEvent:function(a,b,e,d,h,t,p){try{if(!a)return l&&l.sendError({name:"(informativo)(inicializacion)(integridad)",
code:"TG.Tagger.setTaggerEvent",message:"No se puede insertar un TaggerEvent sin id"},!0),null;var A=new c(b,e,d,h,t);if(A instanceof c)return(p instanceof Array||"number"==typeof p)&&A.insertTaggerDimension(p),J[a]=A;l&&l.sendError({name:"(informativo)(inicializacion)(integridad)",code:"TG.Tagger.setTaggerEvent",message:"Error creando instancia de TaggerEvent: "+A},!0)}catch(x){l&&l.sendError({name:"(informativo)(inicializacion)(JavaScript)",code:"TG.Tagger.setTaggerEvent",message:"Error JavaScript. Name -> "+
x.name+" | Message -> "+x.message,error:x},!0)}return null},getTaggerEvent:function(a){return a?J[a+""]:null},setTaggerDimension:function(a,c,d,h){try{var n=new b(a,c,d,h);if(n instanceof b)return K[n.getDimension()]=n;l&&l.sendError({name:"(informativo)(inicializacion)(integridad)",code:"TG.Tagger.setTaggerDimension",message:"Error creando instancia de setTaggerDimension: "+n},!0)}catch(t){l&&l.sendError({name:"(informativo)(inicializacion)(JavaScript)",code:"TG.Tagger.setTaggerDimension",message:"Error JavaScript. Name -> "+
t.name+" | Message -> "+t.message,error:t},!0)}return null},getTaggerDimension:function(a){return a?K[a+""]:null},virtualizePage:function(a,c,d,h){(function(a,c,d,h){if("string"!=typeof a||!a)return l&&l.sendError({name:"(informativo)(ejecucion)",code:"TG.Tagger.virtualizarPagina",message:"Error con el parametro 'page': "+a+" . Se intentar\u00e1 continuar con la ejecuci\u00f3n"},!0),!1;y.onConnectReady(function(){try{var n=da(a),t=n.replace(RegExp("/","g"),":");if(l&&l.isOn()){console.log("VIRT PAGE: |Page:     "+
n);var r={};r[55]=window.location.href;r[67]=z.get("clientId")+"";if(h instanceof Array)for(var g in h){var f=h[g];f instanceof b&&(r[f.getDimension()]=f.getValue())}if(d instanceof Array)for(g in d){var u=d[g],f=y.getTaggerDimension(u);f instanceof b&&f.getValue()&&(r[u]=f.getValue())}console.debug(r)}E._set("page",n);if(h instanceof Array)for(g in h)f=h[g],f instanceof b&&f.toGA();if(d instanceof Array)for(g in d)u=d[g],f=y.getTaggerDimension(u),f instanceof b&&f.toGA();E._trackPageview(n);var k=
{page:n,dimension55:window.location.href,dimension67:z.get("clientId")+""};"string"==typeof c&&c&&(k.title=c);z.set("page",k.page);if(h instanceof Array)for(g in h)f=h[g],f instanceof b&&(k["dimension"+f.getDimension()]=f.getValue());if(d instanceof Array)for(g in d)u=d[g],f=y.getTaggerDimension(u),f instanceof b&&(k["dimension"+u]=f.getValue());z.send("pageview",k);y.setTaggerEvent("virtualizePageEvent","Evento de pagina",t,window.location.href).execute()}catch(M){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",
code:"TG.Tagger.virtualizarPagina",message:"Error JavaScript. Name -> "+M.name+" | Message -> "+M.message,error:M},!0)}})})(a,c,d,h)},setPage:function(a,b){(function(a,b,c){if("string"!=typeof a||!a)return l&&l.sendError({name:"(informativo)(ejecucion)",code:"TG.Tagger.setPage",message:"Error con el parametro 'page': "+a+" . Se intentar\u00e1 continuar con la ejecuci\u00f3n"},!0),!1;y.onConnectReady(function(){try{a=da(a),l&&l.isOn()&&console.log("SET PAGE:  |Page:     "+a),E._set("page",a),b?z.set({page:a,
title:b}):z.set("page",a)}catch(c){l&&l.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"TG.Tagger.setPage",message:"Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!0)}})})(a,b)},inlineTagging:function(a){(new h).init(a)},hotTagging:function(a,b){(new p(a,b)).init()},startDebug:function(){l.start();(new h).startDebug();(new p).startDebug()},stoptDebug:function(){l.stop();(new h).stopDebug();(new p).stopDebug()},connect:function(){q();za()},onConnectReady:function(a){if("function"==
typeof a)if(E&&z)try{a()}catch(b){l&&l.sendError({name:"(informativo)(ejecucion)",code:"TG.Tagger.onConnectReady",message:"Error ejecutando funcion.  Error JavaScript ejecutando funcion pasada. Name -> "+b.name+" | Message -> "+b.message+". Se intentar\u00e1 continuar con la ejecuci\u00f3n"},!0)}else H||y.initPredefinedTaggerDimension(),F.push(a),y.connect()},initPredefinedTaggerDimension:function(){if(!H){l&&l.isOn()&&console.log("PREDEFINED VARS: ");y.setTaggerDimension(11,function(){return"undefined"!=
typeof s&&"undefined"!=typeof s.products&&s.products?s.products:"TG s.products no definido"},"Nombre de producto",3);y.setTaggerDimension(50,function(){return"undefined"!=typeof s&&"undefined"!=typeof s.pageName&&s.pageName?s.pageName:"TG s.pageName no definido"},"Nombre de pagina",3);y.setTaggerDimension(67,function(){try{return z.get("clientId")+""}catch(a){}return""},"Google ClientId",3);if(l&&l.isOn()){var a=[11,50],c={};if(a instanceof Array)for(var d in a){var h=a[d],n=y.getTaggerDimension(h);
n instanceof b&&(c[h]=n.getValue())}console.debug(c)}H=!0}},clear:function(){S()},getVersion:function(){return"2.212"},container:{}}}var a=null,c=null;return{getInstance:function(){a||(a=b(!1));return a},getDevelopmentInstance:function(){c||(c=b(!0));return c}}}();window.TG=Tagger.getInstance();var D=function(){function b(){function a(c,d){var h=[];this.getId=function(){return c};this.generarFunnel=function(){if("function"!=typeof d)return null;var a=d();if(a instanceof b){a.setTipologiaFunnel(this);
for(var c=0;c<h.length;c++)a.addFuncionalidad(h[c]);return a}return null};this.addFuncionalidad=function(a){"function"==typeof a&&h.push(a)}}function b(c,e){var h="",p="string"==typeof c?c:null,B=e instanceof n?e:null,l={},q=B,E=[],z=null,A=function(a,b,c){if(q instanceof n)for(var d=0;d<E.length;d++)if("function"==typeof E[d])try{E[d](a,b,c,z.getId())}catch(e){x&&x.sendError({name:"(informativo)(ejecucion)(JavaScript)",message:"Error JavaScript. Name -> "+e.name+" | Message -> "+e.message,error:e},
!1)}};this.getId=function(){return h+""};this.getNombre=function(){return p+""};this.getRaiz=function(){return B};this.getActual=function(){return q};this.addFuncionalidad=function(a){a&&"function"==typeof a&&E.push(a)};this.addEscape=function(a){a instanceof n&&!l[a.getId()]&&(l[a.getId()]=a)};this.setEscape=function(a){a instanceof n&&(l[a.getId()]=a)};this.setTipologiaFunnel=function(b){b instanceof a&&(z=b)};this.start=function(){x&&x.isOn()&&(console.log("___Funnel___"),console.log("Se activa el estado: \t"+
B.getId()),console.log("Tipologia: \t\t\t"+z.getId()),console.log("Id funnel: \t\t\t"+this.getId()));q=B;A(h,q.getId(),q.getInfo(),z.getId());return B.activar(this.getId(),z.getId())};this.next=function(a,b){if(!a)return null;var c=q.getHijo(a);c||(c=l[a]);return c?(b&&c.setInfo(b),q=c,x&&x.isOn()&&(console.log("___Funnel___"),console.log("Se activa el estado: \t"+q.getId()),console.log("Tipologia: \t\t\t"+z.getId()),console.log("Id funnel: \t\t\t"+this.getId()),console.debug(b)),A(h,q.getId(),q.getInfo(),
z.getId()),q.activar(this.getId(),z.getId()),c):null};(function(){var a=window.location.host;"w"==a.charAt(0)&&"w"==a.charAt(1)&&"w"==a.charAt(2)&&"."==a.charAt(3)&&(a=a.substring(4,a.length));var a=a.split("."),a=a[a.length-2],b=(new Date).getTime()+"";h=parseInt(1E5*Math.random());h=a+":"+b+"-"+h})()}function n(a){var b="string"==typeof a?a:null,c=null,d={},e=[];this.setInfo=function(a){c=a};this.getInfo=function(a){return c};this.setHijo=function(a){a instanceof n&&(d[a.getId()]=a)};this.addHijo=
function(a){a instanceof n&&!d[a.getId()]&&(d[a.getId()]=a)};this.getId=function(){return b+""};this.getHijo=function(a){return a?d[a]:null};this.getHijos=function(){return d};this.activar=function(a,d){try{for(var h=0;h<e.length;h++)if("function"==typeof e[h])e[h](a,b,c,d);return!0}catch(n){x.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"SC.Estado.activar."+this.getId(),message:"Error JavaScript -> ("+n.message+")",error:n})}return!1};this.addFuncionalidad=function(a){a&&"function"==
typeof a&&e.push(a)}}var h={},p={},B={},x=null;try{x=new G("SC-ERROR","ManejadorFunnel",c)}catch(q){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(q))}return{creaEstado:function(a){if(!a)return null;var b=h[a];if(!b)try{return b=new n(a),h[b.getId()]=b}catch(c){return x.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"SC.ManejadorFunnel.crearEstado",message:"Error JavaScript -> ("+
c.message+")",error:c}),null}return b},creaFunnel:function(a,c){if(!(a&&c instanceof n))return null;try{return funnel=new b(a,c),p[funnel.getId()]=funnel}catch(d){x.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"SC.ManejadorFunnel.creaFunnel",message:"Error JavaScript -> ("+d.message+")",error:d})}},getEstado:function(a){if(!a)return null;a=h[a+""];return a instanceof n?a:null},getFunnel:function(a){if(!a)return null;a=p[a+""];return a instanceof b?a:null},creaTipologiaFunnel:function(b,
c){if(!b||"function"!=typeof c)return null;var e=B[b+""];if(!e)try{return e=new a(b,c),B[e.getId()]=e}catch(h){return x.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"SC.ManejadorFunnel.creaTipologiaFunnel",message:"Error JavaScript -> ("+h.message+")",error:h}),null}return e},getTipologiaFunnel:function(a){return a?B[a+""]:null},geneneraFunnelByTipologia:function(b){if(!b)return null;if(B[b+""])try{var c=B[b+""];if(c instanceof a)return c.generarFunnel()}catch(e){}return null},startDebug:function(){x&&
x.start()},stopDebug:function(){x&&x.stop()},getVersion:function(){return c+""}}}var a=null,c=void 0!=superCapaVersion?superCapaVersion:"1.61";return{getInstance:function(){a||(a=b());return a}}}();window.returnVacolba=function(b){var a=F.getInstance().getLastIdLead();try{b=(b+"").toLowerCase();var c=D.getInstance().getFunnel(a);"ok"==b?c.next("OK_VACOLBA"):"ko"==b?c.next("KO_VACOLBA"):c.next("CALLBACK_ERROR")}catch(d){new SCError({name:"(critico)(ejecucion)(JavaScript)",code:"SC.C2C_extension.returnVacolba",
message:"Error javaScript -> ("+d.message+") Metodo returnVacolba del C2C-> (vacolba) IdLead -> ("+a+")"})}};var F=function(){function b(a,c,d){if(null==a||""==a)return null;var p=null,q=null,C="object"==typeof c?c:null,H="object"==typeof d?d:null,y=null,l=null,G=!0,E={cmn:!1,cml:!1,completo:!1},z={};this.debug=h;this.getId=function(){return a+""};this.setAceptaFuncionalidad=function(a,b){a&&"boolean"==typeof b&&(E[a+""]=b)};this.aceptaFuncionalidad=function(a){return a?E[a+""]:!1};this.getParametro=
function(){return q?q+"":""};this.getTipologiasFunnelAceptadas=function(){var a=[];$.each(z,function(b,c){1==E[b]&&a.push(c)});return a};this.getFuncionalidadesAceptadas=function(){var a=[];$.each(E,function(b,c){1==c&&a.push(b)});return a};this.setParametro=function(a){a&&(q=a)};this.setTipologiasFunnel=function(a){if("object"!=typeof a)return!1;$.each(a,function(a,b){1==E[a]&&(z[a]=b)})};this.start=function(){var a;this.isActivo()?($(" .sc-visible-c2cActivo").show(),$(" .sc-oculto-c2cActivo").hide(),
a=!0):($(" .sc-visible-c2cActivo").hide(),$(" .sc-oculto-c2cActivo").show(),a=!1);return a};this.lanzar=function(a,b,c){var d;p?(d=(new Date).getTime(),d=p+3E3<d):d=!0;if(!d||!this.aceptaFuncionalidad(a))return!1;if(d="completo"!=a)d=b&&b.telefono?n.validarTelefono(b.telefono)?!0:!1:!1,d=!d;if(d)return!1;d=z[a];if(d=D.getInstance().geneneraFunnelByTipologia(d)){e=d.getId();var h=!0,l=!1;try{h&&"function"==typeof this.preAbrir&&(h=this.preAbrir())}catch(q){h=!0,this.debug.sendError({name:"(informativo)(ejecucion)(JavaScript)",
code:"SC.C2C."+this.getId()+".abrir",message:"Se rompi\u00f3 la ejecuci\u00f3n del metodo preAbrir. Error JavaScript -> ("+q.message+")",error:q},!1)}if(0==h)this.debug.sendError({name:"(critico)(ejecucion)",code:"SC.C2C."+this.getId()+".abrir",message:"Se rechaz\u00f3 la llamada al C2C por parte de una implementaci\u00f3n externa. IdLead rechazado -> ("+F.getInstance().getLastIdLead()+")"},!0);else if(n.isMobile()&&"function"==typeof H[a]?l=H[a](this,b,c):"function"==typeof C[a]&&(l=C[a](this,b,
c)),0!=l){p=(new Date).getTime();if(!n.isExterna())try{a=e,c="particulares",0<window.location.pathname.indexOf("empresas")?c="empresas":0<window.location.pathname.indexOf("autonomos")&&(c="autonomos"),lanzarPixels(c,"c2c",0,0),lanzarPixels(0,"te llamamos",this.getId(),2),h="",""!=window.s.products&&void 0!=window.s.products&&null!=window.s.products&&(h=window.s.products),dataLayerGTM.push({"c2c.product":h,"c2c.supplier":this.getId(),"c2c.idLead":a,event:"c2c"}),this.debug&&this.debug.isOn()&&(console.log("____Se env\u00eda pixel____"),
console.log("Segmento: "+c))}catch(x){this.debug.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"SC.C2C."+this.getId()+".abrir",message:"Se rompi\u00f3 la ejecuci\u00f3n del metodo sendPixel. Error JavaScript -> ("+x.message+") Metodo sendPixel del C2C-> ("+this.getId()+")",error:x})}try{"function"==typeof this.postAbrir&&this.postAbrir()}catch(B){this.debug.sendError({name:"(informativo)(ejecucion)(JavaScript)",code:"SC.C2C.postAbrir",message:"Error JavaScript -> ("+B.message+"). C2C-> ("+
this.getId()+")",error:B})}}d.getRaiz().setInfo(b);return d.start()}this.debug.sendError({name:"(critico)(ejecucion)",code:"SC.C2C."+this.getId()+".lanzar",message:"No hay funnel asociado al C2C."});return!1};this.preAbrir=function(){return!0};this.postAbrir=function(){};this.getC2CEscape=function(){return y};this.getIdC2CEscape=function(){return y.getId()+""};this.setC2CEscape=function(a){if(!(a instanceof b))return!1;y=a;return!0};this.setFranja=function(a){if(!(a instanceof aa))return!1;l=a;return!0};
this.isActivoFestivos=function(){return G};this.setActivoFestivos=function(a){"boolean"==typeof a&&(G=a)};this.isActivo=function(){if(G){var a=new Date,b=a.getDate(),c=a.getMonth()+1,a=a.getYear()+1900;if(n.festivos[a]&&n.festivos[a][c]&&-1!=n.festivos[a][c].indexOf(b))return!1}return l?l.isActiva()?!0:!1:!0}}function a(){var a={};return{creaC2C:function(c,d,e){c=new b(c,d,e);return null==c||a[c.getId()]?null:a[c.getId()]=c},getC2C:function(b){return null!=b&&b?a[b]:null},balanceoC2C:function(a,b){var c=
b.split(":"),d=n.determinaBalanceo(a,c).split(":"),e=d[0],c="";1<d.length&&(c=d[1]);return(d=this.getC2C(e))?d.isActivo()?[d,c]:d.getC2CEscape()?[d.getC2CEscape(),""]:[d,c]:[null,c]},getLastIdLead:function(){window.idSession=e;return e+""},startDebug:function(){h&&h.start()},stopDebug:function(){h&&h.stop()},version:function(){return d}}}var c=null,d=void 0!=superCapaVersion?superCapaVersion:"5.136",e="",n=new Q,h=null;try{h=new G("SC-ERROR","ContenedorC2C",d)}catch(p){"undefined"!=typeof console&&
(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(p))}return{getInstance:function(){c||(c=a());return c}}}(),ua={};(function(b){function a(r,a,f){null!=r&&("number"==typeof r?this.fromNumber(r,a,f):null==a&&"string"!=typeof r?this.fromString(r,256):this.fromString(r,a))}function c(){return new a(null)}function d(r,a,f,b,k,c){for(;0<=--c;){var m=a*this[r++]+f[b]+k;k=Math.floor(m/67108864);f[b++]=67108863&m}return k}
function e(r,a,f,b,k,c){var m=32767&a;for(a>>=15;0<=--c;){var d=32767&this[r],e=this[r++]>>15,h=a*d+e*m,d=m*d+((32767&h)<<15)+f[b]+(1073741823&k);k=(d>>>30)+(h>>>15)+a*e+(k>>>30);f[b++]=1073741823&d}return k}function n(r,a,f,b,k,c){var m=16383&a;for(a>>=14;0<=--c;){var d=16383&this[r],e=this[r++]>>14,h=a*d+e*m,d=m*d+((16383&h)<<14)+f[b]+k;k=(d>>28)+(h>>14)+a*e;f[b++]=268435455&d}return k}function h(a,g){var f=O[a.charCodeAt(g)];return null==f?-1:f}function p(a){var g=c();return g.fromInt(a),g}function q(a){var g,
f=1;return 0!=(g=a>>>16)&&(a=g,f+=16),0!=(g=a>>8)&&(a=g,f+=8),0!=(g=a>>4)&&(a=g,f+=4),0!=(g=a>>2)&&(a=g,f+=2),0!=a>>1&&(f+=1),f}function x(a){this.m=a}function C(a){this.m=a;this.mp=a.invDigit();this.mpl=32767&this.mp;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function F(a,g){return a&g}function D(a,g){return a|g}function G(a,g){return a^g}function H(a,g){return a&~g}function y(){}function l(a){return a}function L(r){this.r2=c();this.q3=c();a.ONE.dlShiftTo(2*r.t,this.r2);this.mu=this.r2.divide(r);
this.m=r}function E(){this.j=this.i=0;this.S=[]}function z(){}function A(r,g){return new a(r,g)}function t(){this.n=null;this.e=0;this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function N(a){var g,f,b="";for(g=0;g+3<=a.length;g+=3)f=parseInt(a.substring(g,g+3),16),b+=ba.charAt(f>>6)+ba.charAt(63&f);for(g+1==a.length?(f=parseInt(a.substring(g,g+1),16),b+=ba.charAt(f<<2)):g+2==a.length&&(f=parseInt(a.substring(g,g+2),16),b+=ba.charAt(f>>2)+ba.charAt((3&f)<<4));0<(3&b.length);)b+=Z;return b}
function T(a){var g,f,b="",k=0;for(g=0;g<a.length&&a.charAt(g)!=Z;++g)v=ba.indexOf(a.charAt(g)),0>v||(0==k?(b+=U.charAt(v>>2),f=3&v,k=1):1==k?(b+=U.charAt(f<<2|v>>4),f=15&v,k=2):2==k?(b+=U.charAt(f),b+=U.charAt(v>>2),f=3&v,k=3):(b+=U.charAt(f<<2|v>>4),b+=U.charAt(15&v),k=0));return 1==k&&(b+=U.charAt(f<<2)),b}var I;"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=e,I=30):"Netscape"!=navigator.appName?(a.prototype.am=d,I=26):(a.prototype.am=n,I=28);a.prototype.DB=I;a.prototype.DM=(1<<
I)-1;a.prototype.DV=1<<I;a.prototype.FV=Math.pow(2,52);a.prototype.F1=52-I;a.prototype.F2=2*I-52;var U="0123456789abcdefghijklmnopqrstuvwxyz",O=[],J;I=48;for(J=0;9>=J;++J)O[I++]=J;I=97;for(J=10;36>J;++J)O[I++]=J;I=65;for(J=10;36>J;++J)O[I++]=J;x.prototype.convert=function(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};x.prototype.revert=function(a){return a};x.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};x.prototype.mulTo=function(a,g,f){a.multiplyTo(g,f);this.reduce(f)};x.prototype.sqrTo=
function(a,g){a.squareTo(g);this.reduce(g)};C.prototype.convert=function(r){var g=c();return r.abs().dlShiftTo(this.m.t,g),g.divRemTo(this.m,null,g),0>r.s&&0<g.compareTo(a.ZERO)&&this.m.subTo(g,g),g};C.prototype.revert=function(a){var g=c();return a.copyTo(g),this.reduce(g),g};C.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var g=0;g<this.m.t;++g){var f=32767&a[g],b=f*this.mpl+((f*this.mph+(a[g]>>15)*this.mpl&this.um)<<15)&a.DM,f=g+this.m.t;for(a[f]+=this.m.am(0,b,a,g,0,this.m.t);a[f]>=
a.DV;)a[f]-=a.DV,a[++f]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};C.prototype.mulTo=function(a,g,f){a.multiplyTo(g,f);this.reduce(f)};C.prototype.sqrTo=function(a,g){a.squareTo(g);this.reduce(g)};a.prototype.copyTo=function(a){for(var g=this.t-1;0<=g;--g)a[g]=this[g];a.t=this.t;a.s=this.s};a.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};a.prototype.fromString=function(r,g){var f;if(16==g)f=4;else if(8==g)f=3;else if(256==
g)f=8;else if(2==g)f=1;else if(32==g)f=5;else{if(4!=g)return void this.fromRadix(r,g);f=2}this.s=this.t=0;for(var b=r.length,k=!1,c=0;0<=--b;){var m=8==f?255&r[b]:h(r,b);0>m?"-"==r.charAt(b)&&(k=!0):(k=!1,0==c?this[this.t++]=m:c+f>this.DB?(this[this.t-1]|=(m&(1<<this.DB-c)-1)<<c,this[this.t++]=m>>this.DB-c):this[this.t-1]|=m<<c,c+=f,c>=this.DB&&(c-=this.DB))}8==f&&0!=(128&r[0])&&(this.s=-1,0<c&&(this[this.t-1]|=(1<<this.DB-c)-1<<c));this.clamp();k&&a.ZERO.subTo(this,this)};a.prototype.clamp=function(){for(var a=
this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};a.prototype.dlShiftTo=function(a,g){var f;for(f=this.t-1;0<=f;--f)g[f+a]=this[f];for(f=a-1;0<=f;--f)g[f]=0;g.t=this.t+a;g.s=this.s};a.prototype.drShiftTo=function(a,g){for(var f=a;f<this.t;++f)g[f-a]=this[f];g.t=Math.max(this.t-a,0);g.s=this.s};a.prototype.lShiftTo=function(a,g){var f,b=a%this.DB,k=this.DB-b,c=(1<<k)-1,m=Math.floor(a/this.DB),d=this.s<<b&this.DM;for(f=this.t-1;0<=f;--f)g[f+m+1]=this[f]>>k|d,d=(this[f]&c)<<b;for(f=m-1;0<=f;--f)g[f]=
0;g[m]=d;g.t=this.t+m+1;g.s=this.s;g.clamp()};a.prototype.rShiftTo=function(a,g){g.s=this.s;var f=Math.floor(a/this.DB);if(f>=this.t)return void(g.t=0);var b=a%this.DB,k=this.DB-b,c=(1<<b)-1;g[0]=this[f]>>b;for(var m=f+1;m<this.t;++m)g[m-f-1]|=(this[m]&c)<<k,g[m-f]=this[m]>>b;0<b&&(g[this.t-f-1]|=(this.s&c)<<k);g.t=this.t-f;g.clamp()};a.prototype.subTo=function(a,g){for(var f=0,b=0,k=Math.min(a.t,this.t);k>f;)b+=this[f]-a[f],g[f++]=b&this.DM,b>>=this.DB;if(a.t<this.t){for(b-=a.s;f<this.t;)b+=this[f],
g[f++]=b&this.DM,b>>=this.DB;b+=this.s}else{for(b+=this.s;f<a.t;)b-=a[f],g[f++]=b&this.DM,b>>=this.DB;b-=a.s}g.s=0>b?-1:0;-1>b?g[f++]=this.DV+b:0<b&&(g[f++]=b);g.t=f;g.clamp()};a.prototype.multiplyTo=function(r,g){var b=this.abs(),u=r.abs(),k=b.t;for(g.t=k+u.t;0<=--k;)g[k]=0;for(k=0;k<u.t;++k)g[k+b.t]=b.am(0,u[k],g,k,0,b.t);g.s=0;g.clamp();this.s!=r.s&&a.ZERO.subTo(g,g)};a.prototype.squareTo=function(a){for(var g=this.abs(),b=a.t=2*g.t;0<=--b;)a[b]=0;for(b=0;b<g.t-1;++b){var u=g.am(b,g[b],a,2*b,0,
1);(a[b+g.t]+=g.am(b+1,2*g[b],a,2*b+1,u,g.t-b-1))>=g.DV&&(a[b+g.t]-=g.DV,a[b+g.t+1]=1)}0<a.t&&(a[a.t-1]+=g.am(b,g[b],a,2*b,0,1));a.s=0;a.clamp()};a.prototype.divRemTo=function(r,g,b){var u=r.abs();if(!(0>=u.t)){var k=this.abs();if(k.t<u.t)return null!=g&&g.fromInt(0),void(null!=b&&this.copyTo(b));null==b&&(b=c());var d=c(),m=this.s;r=r.s;var e=this.DB-q(u[u.t-1]);0<e?(u.lShiftTo(e,d),k.lShiftTo(e,b)):(u.copyTo(d),k.copyTo(b));u=d.t;k=d[u-1];if(0!=k){var h=k*(1<<this.F1)+(1<u?d[u-2]>>this.F2:0),l=
this.FV/h,h=(1<<this.F1)/h,n=1<<this.F2,p=b.t,x=p-u,t=null==g?c():g;d.dlShiftTo(x,t);0<=b.compareTo(t)&&(b[b.t++]=1,b.subTo(t,b));a.ONE.dlShiftTo(u,t);for(t.subTo(d,d);d.t<u;)d[d.t++]=0;for(;0<=--x;){var w=b[--p]==k?this.DM:Math.floor(b[p]*l+(b[p-1]+n)*h);if((b[p]+=d.am(0,w,b,x,0,u))<w)for(d.dlShiftTo(x,t),b.subTo(t,b);b[p]<--w;)b.subTo(t,b)}null!=g&&(b.drShiftTo(u,g),m!=r&&a.ZERO.subTo(g,g));b.t=u;b.clamp();0<e&&b.rShiftTo(e,b);0>m&&a.ZERO.subTo(b,b)}}};a.prototype.invDigit=function(){if(1>this.t)return 0;
var a=this[0];if(0==(1&a))return 0;var g=3&a;return g=g*(2-(15&a)*g)&15,g=g*(2-(255&a)*g)&255,g=g*(2-((65535&a)*g&65535))&65535,g=g*(2-a*g%this.DV)%this.DV,0<g?this.DV-g:-g};a.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)};a.prototype.exp=function(b,g){if(4294967295<b||1>b)return a.ONE;var f=c(),u=c(),k=g.convert(this),d=q(b)-1;for(k.copyTo(f);0<=--d;)if(g.sqrTo(f,u),0<(b&1<<d))g.mulTo(u,k,f);else var m=f,f=u,u=m;return g.revert(f)};a.prototype.toString=function(a){if(0>this.s)return"-"+
this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else{if(4!=a)return this.toRadix(a);a=2}var g,b=(1<<a)-1,u=!1,k="",c=this.t,m=this.DB-c*this.DB%a;if(0<c--)for(m<this.DB&&0<(g=this[c]>>m)&&(u=!0,k=U.charAt(g));0<=c;)a>m?(g=(this[c]&(1<<m)-1)<<a-m,g|=this[--c]>>(m+=this.DB-a)):(g=this[c]>>(m-=a)&b,0>=m&&(m+=this.DB,--c)),0<g&&(u=!0),u&&(k+=U.charAt(g));return u?k:"0"};a.prototype.negate=function(){var b=c();return a.ZERO.subTo(this,b),b};a.prototype.abs=function(){return 0>
this.s?this.negate():this};a.prototype.compareTo=function(a){var g=this.s-a.s;if(0!=g)return g;var b=this.t;if(g=b-a.t,0!=g)return 0>this.s?-g:g;for(;0<=--b;)if(0!=(g=this[b]-a[b]))return g;return 0};a.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+q(this[this.t-1]^this.s&this.DM)};a.prototype.mod=function(b){var g=c();return this.abs().divRemTo(b,null,g),0>this.s&&0<g.compareTo(a.ZERO)&&b.subTo(g,g),g};a.prototype.modPowInt=function(a,g){var b;return b=256>a||g.isEven()?new x(g):
new C(g),this.exp(a,b)};a.ZERO=p(0);a.ONE=p(1);y.prototype.convert=l;y.prototype.revert=l;y.prototype.mulTo=function(a,g,b){a.multiplyTo(g,b)};y.prototype.sqrTo=function(a,g){a.squareTo(g)};L.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var g=c();return a.copyTo(g),this.reduce(g),g};L.prototype.revert=function(a){return a};L.prototype.reduce=function(a){a.drShiftTo(this.m.t-1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,
this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};L.prototype.mulTo=function(a,g,b){a.multiplyTo(g,b);this.reduce(b)};L.prototype.sqrTo=function(a,g){a.squareTo(g);this.reduce(g)};var K=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,
239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],V=67108864/K[K.length-1];a.prototype.chunkSize=
function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};a.prototype.toRadix=function(a){if(null==a&&(a=10),0==this.signum()||2>a||36<a)return"0";var g=this.chunkSize(a),g=Math.pow(a,g),b=p(g),u=c(),k=c(),d="";for(this.divRemTo(b,u,k);0<u.signum();)d=(g+k.intValue()).toString(a).substr(1)+d,u.divRemTo(b,u,k);return k.intValue().toString(a)+d};a.prototype.fromRadix=function(b,g){this.fromInt(0);null==g&&(g=10);for(var f=this.chunkSize(g),c=Math.pow(g,f),k=!1,d=0,m=0,e=0;e<b.length;++e){var l=h(b,
e);0>l?"-"==b.charAt(e)&&0==this.signum()&&(k=!0):(m=g*m+l,++d>=f&&(this.dMultiply(c),this.dAddOffset(m,0),d=0,m=0))}0<d&&(this.dMultiply(Math.pow(g,d)),this.dAddOffset(m,0));k&&a.ZERO.subTo(this,this)};a.prototype.fromNumber=function(b,g,f){if("number"==typeof g)if(2>b)this.fromInt(1);else for(this.fromNumber(b,f),this.testBit(b-1)||this.bitwiseTo(a.ONE.shiftLeft(b-1),D,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(g);)this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(a.ONE.shiftLeft(b-
1),this);else{f=[];var c=7&b;f.length=(b>>3)+1;g.nextBytes(f);0<c?f[0]&=(1<<c)-1:f[0]=0;this.fromString(f,256)}};a.prototype.bitwiseTo=function(a,b,f){var c,k,d=Math.min(a.t,this.t);for(c=0;d>c;++c)f[c]=b(this[c],a[c]);if(a.t<this.t){k=a.s&this.DM;for(c=d;c<this.t;++c)f[c]=b(this[c],k);f.t=this.t}else{k=this.s&this.DM;for(c=d;c<a.t;++c)f[c]=b(k,a[c]);f.t=a.t}f.s=b(this.s,a.s);f.clamp()};a.prototype.changeBit=function(b,g){var f=a.ONE.shiftLeft(b);return this.bitwiseTo(f,g,f),f};a.prototype.addTo=
function(a,b){for(var f=0,c=0,k=Math.min(a.t,this.t);k>f;)c+=this[f]+a[f],b[f++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c+=a.s;f<this.t;)c+=this[f],b[f++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;f<a.t;)c+=a[f],b[f++]=c&this.DM,c>>=this.DB;c+=a.s}b.s=0>c?-1:0;0<c?b[f++]=c:-1>c&&(b[f++]=this.DV+c);b.t=f;b.clamp()};a.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};a.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=
0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}};a.prototype.multiplyLowerTo=function(a,b,f){var c=Math.min(this.t+a.t,b);f.s=0;for(f.t=c;0<c;)f[--c]=0;var k;for(k=f.t-this.t;k>c;++c)f[c+this.t]=this.am(0,a[c],f,c,0,this.t);for(k=Math.min(a.t,b);k>c;++c)this.am(0,a[c],f,c,0,b-c);f.clamp()};a.prototype.multiplyUpperTo=function(a,b,f){--b;var c=f.t=this.t+a.t-b;for(f.s=0;0<=--c;)f[c]=0;for(c=Math.max(b-this.t,0);c<a.t;++c)f[this.t+c-b]=this.am(b-c,a[c],
f,0,0,this.t+c-b);f.clamp();f.drShiftTo(1,f)};a.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,f=0>this.s?a-1:0;if(0<this.t)if(0==b)f=this[0]%a;else for(var c=this.t-1;0<=c;--c)f=(b*f+this[c])%a;return f};a.prototype.millerRabin=function(b){var g=this.subtract(a.ONE),f=g.getLowestSetBit();if(0>=f)return!1;var u=g.shiftRight(f);b=b+1>>1;b>K.length&&(b=K.length);for(var k=c(),d=0;b>d;++d){k.fromInt(K[Math.floor(Math.random()*K.length)]);var m=k.modPow(u,this);if(0!=m.compareTo(a.ONE)&&
0!=m.compareTo(g)){for(var e=1;e++<f&&0!=m.compareTo(g);)if(m=m.modPowInt(2,this),0==m.compareTo(a.ONE))return!1;if(0!=m.compareTo(g))return!1}}return!0};a.prototype.clone=function(){var a=c();return this.copyTo(a),a};a.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};a.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};
a.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};a.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};a.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var f,c=this.DB-a*this.DB%8,k=0;if(0<a--)for(c<this.DB&&(f=this[a]>>c)!=(this.s&this.DM)>>c&&(b[k++]=f|this.s<<this.DB-c);0<=a;)8>c?(f=(this[a]&(1<<c)-1)<<8-c,f|=this[--a]>>(c+=this.DB-8)):(f=this[a]>>(c-=8)&255,0>=c&&(c+=this.DB,--a)),0!=(128&f)&&(f|=-256),0==k&&(128&this.s)!=
(128&f)&&++k,(0<k||f!=this.s)&&(b[k++]=f);return b};a.prototype.equals=function(a){return 0==this.compareTo(a)};a.prototype.min=function(a){return 0>this.compareTo(a)?this:a};a.prototype.max=function(a){return 0<this.compareTo(a)?this:a};a.prototype.and=function(a){var b=c();return this.bitwiseTo(a,F,b),b};a.prototype.or=function(a){var b=c();return this.bitwiseTo(a,D,b),b};a.prototype.xor=function(a){var b=c();return this.bitwiseTo(a,G,b),b};a.prototype.andNot=function(a){var b=c();return this.bitwiseTo(a,
H,b),b};a.prototype.not=function(){for(var a=c(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a};a.prototype.shiftLeft=function(a){var b=c();return 0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b),b};a.prototype.shiftRight=function(a){var b=c();return 0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b),b};a.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this.DB;var f=this[a];if(0==f)a=-1;else var c=0,a=(0==(65535&f)&&(f>>=16,c+=16),0==(255&f)&&(f>>=8,
c+=8),0==(15&f)&&(f>>=4,c+=4),0==(3&f)&&(f>>=2,c+=2),0==(1&f)&&++c,c);return b+a}return 0>this.s?this.t*this.DB:-1};a.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,f=0;f<this.t;++f){for(var c=this[f]^b,k=0;0!=c;)c&=c-1,++k;a+=k}return a};a.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)};a.prototype.setBit=function(a){return this.changeBit(a,D)};a.prototype.clearBit=function(a){return this.changeBit(a,H)};a.prototype.flipBit=
function(a){return this.changeBit(a,G)};a.prototype.add=function(a){var b=c();return this.addTo(a,b),b};a.prototype.subtract=function(a){var b=c();return this.subTo(a,b),b};a.prototype.multiply=function(a){var b=c();return this.multiplyTo(a,b),b};a.prototype.divide=function(a){var b=c();return this.divRemTo(a,b,null),b};a.prototype.remainder=function(a){var b=c();return this.divRemTo(a,null,b),b};a.prototype.divideAndRemainder=function(a){var b=c(),f=c();return this.divRemTo(a,b,f),[b,f]};a.prototype.modPow=
function(a,b){var f,d,k=a.bitLength(),e=p(1);if(0>=k)return e;f=18>k?1:48>k?3:144>k?4:768>k?5:6;d=8>k?new x(b):b.isEven()?new L(b):new C(b);var m=[],h=3,l=f-1,n=(1<<f)-1;if(m[1]=d.convert(this),1<f)for(k=c(),d.sqrTo(m[1],k);n>=h;)m[h]=c(),d.mulTo(k,m[h-2],m[h]),h+=2;for(var t,w,y=a.t-1,A=!0,z=c(),k=q(a[y])-1;0<=y;){k>=l?t=a[y]>>k-l&n:(t=(a[y]&(1<<k+1)-1)<<l-k,0<y&&(t|=a[y-1]>>this.DB+k-l));for(h=f;0==(1&t);)t>>=1,--h;if(0>(k-=h)&&(k+=this.DB,--y),A)m[t].copyTo(e),A=!1;else{for(;1<h;)d.sqrTo(e,z),
d.sqrTo(z,e),h-=2;0<h?d.sqrTo(e,z):(w=e,e=z,z=w);d.mulTo(z,m[t],e)}for(;0<=y&&0==(a[y]&1<<k);)d.sqrTo(e,z),w=e,e=z,z=w,0>--k&&(k=this.DB-1,--y)}return d.revert(e)};a.prototype.modInverse=function(b){var g=b.isEven();if(this.isEven()&&g||0==b.signum())return a.ZERO;for(var f=b.clone(),c=this.clone(),k=p(1),d=p(0),m=p(0),e=p(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),g?(k.isEven()&&d.isEven()||(k.addTo(this,k),d.subTo(b,d)),k.rShiftTo(1,k)):d.isEven()||d.subTo(b,d),d.rShiftTo(1,d);for(;c.isEven();)c.rShiftTo(1,
c),g?(m.isEven()&&e.isEven()||(m.addTo(this,m),e.subTo(b,e)),m.rShiftTo(1,m)):e.isEven()||e.subTo(b,e),e.rShiftTo(1,e);0<=f.compareTo(c)?(f.subTo(c,f),g&&k.subTo(m,k),d.subTo(e,d)):(c.subTo(f,c),g&&m.subTo(k,m),e.subTo(d,e))}return 0!=c.compareTo(a.ONE)?a.ZERO:0<=e.compareTo(b)?e.subtract(b):0>e.signum()?(e.addTo(b,e),0>e.signum()?e.add(b):e):e};a.prototype.pow=function(a){return this.exp(a,new y)};a.prototype.gcd=function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();
if(0>b.compareTo(a)){var f=b,b=a;a=f}var f=b.getLowestSetBit(),c=a.getLowestSetBit();if(0>c)return b;c>f&&(c=f);for(0<c&&(b.rShiftTo(c,b),a.rShiftTo(c,a));0<b.signum();)0<(f=b.getLowestSetBit())&&b.rShiftTo(f,b),0<(f=a.getLowestSetBit())&&a.rShiftTo(f,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));return 0<c&&a.lShiftTo(c,a),a};a.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c[0]<=K[K.length-1]){for(b=0;b<K.length;++b)if(c[0]==K[b])return!0;
return!1}if(c.isEven())return!1;for(b=1;b<K.length;){for(var d=K[b],k=b+1;k<K.length&&V>d;)d*=K[k++];for(d=c.modInt(d);k>b;)if(0==d%K[b++])return!1}return c.millerRabin(a)};a.prototype.square=function(){var a=c();return this.squareTo(a),a};E.prototype.init=function(a){var b,c,d;for(b=0;256>b;++b)this.S[b]=b;for(b=c=0;256>b;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.j=this.i=0};E.prototype.next=function(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&
255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]};var Q,W,P;if(null==W){W=[];P=0;if(window.crypto&&window.crypto.getRandomValues)for(J=new Uint32Array(256),window.crypto.getRandomValues(J),I=0;I<J.length;++I)W[P++]=255&J[I];var R=function(a){if(this.count=this.count||0,256<=this.count||256<=P)return void(window.removeEventListener?window.removeEventListener("mousemove",R):window.detachEvent&&window.detachEvent("onmousemove",R));this.count+=1;a=a.x+a.y;
W[P++]=255&a};window.addEventListener?window.addEventListener("mousemove",R):window.attachEvent&&window.attachEvent("onmousemove",R)}z.prototype.nextBytes=function(a){var b;for(b=0;b<a.length;++b){var c=b,d;if(null==Q){for(Q=new E;256>P;)d=Math.floor(65536*Math.random()),W[P++]=255&d;Q.init(W);for(P=0;P<W.length;++P)W[P]=0;P=0}d=Q.next();a[c]=d}};t.prototype.doPublic=function(a){return a.modPowInt(this.e,this.n)};t.prototype.setPublic=function(a,b){null!=a&&null!=b&&0<a.length&&0<b.length?(this.n=
A(a,16),this.e=parseInt(b,16)):console.error("Invalid RSA public key")};t.prototype.encrypt=function(b){var g;g=this.n.bitLength()+7>>3;if(g<b.length+11)g=(console.error("Message too long for RSA"),null);else{for(var c=[],d=b.length-1;0<=d&&0<g;){var k=b.charCodeAt(d--);128>k?c[--g]=k:127<k&&2048>k?(c[--g]=63&k|128,c[--g]=k>>6|192):(c[--g]=63&k|128,c[--g]=k>>6&63|128,c[--g]=k>>12|224)}c[--g]=0;b=new z;for(d=[];2<g;){for(d[0]=0;0==d[0];)b.nextBytes(d);c[--g]=d[0]}g=(c[--g]=2,c[--g]=0,new a(c))}if(null==
g)return null;g=this.doPublic(g);if(null==g)return null;g=g.toString(16);return 0==(1&g.length)?g:"0"+g};t.prototype.doPrivate=function(a){if(null==this.p||null==this.q)return a.modPow(this.d,this.n);var b=a.mod(this.p).modPow(this.dmp1,this.p);for(a=a.mod(this.q).modPow(this.dmq1,this.q);0>b.compareTo(a);)b=b.add(this.p);return b.subtract(a).multiply(this.coeff).mod(this.p).multiply(this.q).add(a)};t.prototype.setPrivate=function(a,b,c){null!=a&&null!=b&&0<a.length&&0<b.length?(this.n=A(a,16),this.e=
parseInt(b,16),this.d=A(c,16)):console.error("Invalid RSA private key")};t.prototype.setPrivateEx=function(a,b,c,d,k,e,m,h){null!=a&&null!=b&&0<a.length&&0<b.length?(this.n=A(a,16),this.e=parseInt(b,16),this.d=A(c,16),this.p=A(d,16),this.q=A(k,16),this.dmp1=A(e,16),this.dmq1=A(m,16),this.coeff=A(h,16)):console.error("Invalid RSA private key")};t.prototype.generate=function(b,c){var f=new z,d=b>>1;this.e=parseInt(c,16);for(var k=new a(c,16);;){for(;this.p=new a(b-d,1,f),0!=this.p.subtract(a.ONE).gcd(k).compareTo(a.ONE)||
!this.p.isProbablePrime(10););for(;this.q=new a(d,1,f),0!=this.q.subtract(a.ONE).gcd(k).compareTo(a.ONE)||!this.q.isProbablePrime(10););if(0>=this.p.compareTo(this.q)){var e=this.p;this.p=this.q;this.q=e}var e=this.p.subtract(a.ONE),m=this.q.subtract(a.ONE),h=e.multiply(m);if(0==h.gcd(k).compareTo(a.ONE)){this.n=this.p.multiply(this.q);this.d=k.modInverse(h);this.dmp1=this.d.mod(e);this.dmq1=this.d.mod(m);this.coeff=this.q.modInverse(this.p);break}}};t.prototype.decrypt=function(a){a=A(a,16);a=this.doPrivate(a);
if(null==a)a=null;else a:{var b=this.n.bitLength()+7>>3;a=a.toByteArray();for(var c=0;c<a.length&&0==a[c];)++c;if(a.length-c!=b-1||2!=a[c])a=null;else{for(++c;0!=a[c];)if(++c>=a.length){a=null;break a}for(b="";++c<a.length;){var d=255&a[c];128>d?b+=String.fromCharCode(d):191<d&&224>d?(b+=String.fromCharCode((31&d)<<6|63&a[c+1]),++c):(b+=String.fromCharCode((15&d)<<12|(63&a[c+1])<<6|63&a[c+2]),c+=2)}a=b}}return a};(function(){t.prototype.generateAsync=function(b,g,f){var d=new z,k=b>>1;this.e=parseInt(g,
16);var e=new a(g,16),m=this,h=function(){var g=function(){if(0>=m.p.compareTo(m.q)){var b=m.p;m.p=m.q;m.q=b}var b=m.p.subtract(a.ONE),c=m.q.subtract(a.ONE),g=b.multiply(c);0==g.gcd(e).compareTo(a.ONE)?(m.n=m.p.multiply(m.q),m.d=e.modInverse(g),m.dmp1=m.d.mod(b),m.dmq1=m.d.mod(c),m.coeff=m.q.modInverse(m.p),setTimeout(function(){f()},0)):setTimeout(h,0)},l=function(){m.q=c();m.q.fromNumberAsync(k,1,d,function(){m.q.subtract(a.ONE).gcda(e,function(b){0==b.compareTo(a.ONE)&&m.q.isProbablePrime(10)?
setTimeout(g,0):setTimeout(l,0)})})},n=function(){m.p=c();m.p.fromNumberAsync(b-k,1,d,function(){m.p.subtract(a.ONE).gcda(e,function(b){0==b.compareTo(a.ONE)&&m.p.isProbablePrime(10)?setTimeout(l,0):setTimeout(n,0)})})};setTimeout(n,0)};setTimeout(h,0)};a.prototype.gcda=function(a,b){var c=0>this.s?this.negate():this.clone(),d=0>a.s?a.negate():a.clone();if(0>c.compareTo(d))var k=c,c=d,d=k;var e=c.getLowestSetBit(),m=d.getLowestSetBit();if(0>m)return void b(c);m>e&&(m=e);0<m&&(c.rShiftTo(m,c),d.rShiftTo(m,
d));var h=function(){0<(e=c.getLowestSetBit())&&c.rShiftTo(e,c);0<(e=d.getLowestSetBit())&&d.rShiftTo(e,d);0<=c.compareTo(d)?(c.subTo(d,c),c.rShiftTo(1,c)):(d.subTo(c,d),d.rShiftTo(1,d));0<c.signum()?setTimeout(h,0):(0<m&&d.lShiftTo(m,d),setTimeout(function(){b(d)},0))};setTimeout(h,10)};a.prototype.fromNumberAsync=function(b,c,f,d){if("number"==typeof c)if(2>b)this.fromInt(1);else{this.fromNumber(b,f);this.testBit(b-1)||this.bitwiseTo(a.ONE.shiftLeft(b-1),D,this);this.isEven()&&this.dAddOffset(1,
0);var k=this,e=function(){k.dAddOffset(2,0);k.bitLength()>b&&k.subTo(a.ONE.shiftLeft(b-1),k);k.isProbablePrime(c)?setTimeout(function(){d()},0):setTimeout(e,0)};setTimeout(e,0)}else{f=[];var m=7&b;f.length=(b>>3)+1;c.nextBytes(f);0<m?f[0]&=(1<<m)-1:f[0]=0;this.fromString(f,256)}}})();var ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z="=",w=w||{};w.env=w.env||{};var X=w,Y=Object.prototype,aa=["toString","valueOf"];w.env.parseUA=function(a){var b,c=function(a){var b=0;return parseFloat(a.replace(/\./g,
function(){return 1==b++?"":"."}))},d=navigator,d={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:d&&d.cajaVersion,secure:!1,os:null};a=a||navigator&&navigator.userAgent;var k=window&&window.location,k=k&&k.href;return d.secure=k&&0===k.toLowerCase().indexOf("https"),a&&(/windows|win32/i.test(a)?d.os="windows":/macintosh/i.test(a)?d.os="macintosh":/rhino/i.test(a)&&(d.os="rhino"),/KHTML/.test(a)&&(d.webkit=1),b=a.match(/AppleWebKit\/([^\s]*)/),
b&&b[1]&&(d.webkit=c(b[1]),/ Mobile\//.test(a)?(d.mobile="Apple",b=a.match(/OS ([^\s]*)/),b&&b[1]&&(b=c(b[1].replace("_","."))),d.ios=b,d.ipad=d.ipod=d.iphone=0,b=a.match(/iPad|iPod|iPhone/),b&&b[0]&&(d[b[0].toLowerCase()]=d.ios)):(b=a.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),b&&(d.mobile=b[0]),/webOS/.test(a)&&(d.mobile="WebOS",b=a.match(/webOS\/([^\s]*);/),b&&b[1]&&(d.webos=c(b[1]))),/ Android/.test(a)&&(d.mobile="Android",b=a.match(/Android ([^\s]*);/),b&&b[1]&&(d.android=c(b[1])))),
b=a.match(/Chrome\/([^\s]*)/),b&&b[1]?d.chrome=c(b[1]):(b=a.match(/AdobeAIR\/([^\s]*)/),b&&(d.air=b[0]))),d.webkit||(b=a.match(/Opera[\s\/]([^\s]*)/),b&&b[1]?(d.opera=c(b[1]),b=a.match(/Version\/([^\s]*)/),b&&b[1]&&(d.opera=c(b[1])),b=a.match(/Opera Mini[^;]*/),b&&(d.mobile=b[0])):(b=a.match(/MSIE\s([^;]*)/),b&&b[1]?d.ie=c(b[1]):(b=a.match(/Gecko\/([^\s]*)/),b&&(d.gecko=1,b=a.match(/rv:([^\s\)]*)/),b&&b[1]&&(d.gecko=c(b[1]))))))),d};w.env.ua=w.env.parseUA();w.isFunction=function(a){return"function"==
typeof a||"[object Function]"===Y.toString.apply(a)};w._IEEnumFix=w.env.ua.ie?function(a,b){var c,d,k;for(c=0;c<aa.length;c+=1)d=aa[c],k=b[d],X.isFunction(k)&&k!=Y[d]&&(a[d]=k)}:function(){};w.extend=function(a,b,c){if(!b||!a)throw Error("extend failed, please check that all dependencies are included.");var d,k=function(){};if(k.prototype=b.prototype,a.prototype=new k,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Y.constructor&&(b.prototype.constructor=b),c){for(d in c)X.hasOwnProperty(c,
d)&&(a.prototype[d]=c[d]);X._IEEnumFix(a.prototype,c)}};"undefined"!=typeof KJUR&&KJUR||(KJUR={});"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={});KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){a=a.toString(16);return 1==a.length%2&&(a="0"+a),a};this.bigIntToMinTwosComplementsHex=function(b){var c=b.toString(16);if("-"!=c.substr(0,1))1==c.length%2?c="0"+c:c.match(/^[0-7]/)||(c="00"+c);else{var d=c.substr(1).length;1==d%2?d+=1:c.match(/^[0-7]/)||(d+=2);for(var c="",e=0;d>
e;e++)c+="f";c=(new a(c,16)).xor(b).add(a.ONE).toString(16).replace(/^-/,"")}return c};this.getPEMStringFromHex=function(a,b){var c=CryptoJS.enc.Hex.parse(a),c=CryptoJS.enc.SCBase64.stringify(c).replace(/(.{64})/g,"$1\r\n");return c=c.replace(/\r\n$/,""),"-----BEGIN "+b+"-----\r\n"+c+"\r\n-----END "+b+"-----\r\n"}};KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(1==this.hV.length%2)throw"value hex must be even length: n=0,v="+
this.hV;var a=this.hV.length/2,b=a.toString(16);if(1==b.length%2&&(b="0"+b),128>a)return b;var c=b.length/2;if(15<c)throw"ASN.1 length too long to represent by 8x: n = "+a.toString(16);return(128+c).toString(16)+b};this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV};this.getValueHex=function(){return this.getEncodedHex(),this.hV};this.getFreshValueHex=
function(){return""}};KJUR.asn1.DERAbstractString=function(a){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s};this.setString=function(a){this.hTLV=null;this.isModified=!0;this.s=a;this.hV=stohex(this.s)};this.setStringHex=function(a){this.hTLV=null;this.isModified=!0;this.s=null;this.hV=a};this.getFreshValueHex=function(){return this.hV};"undefined"!=typeof a&&("undefined"!=typeof a.str?this.setString(a.str):"undefined"!=typeof a.hex&&this.setStringHex(a.hex))};
w.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractTime=function(){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(a){utc=a.getTime()+6E4*a.getTimezoneOffset();return new Date(utc)};this.formatDate=function(a,b){var c=this.zeroPadding,d=this.localDateToUTC(a),k=String(d.getFullYear());"utc"==b&&(k=k.substr(2,2));var e=c(String(d.getMonth()+1),2),m=c(String(d.getDate()),2),h=c(String(d.getHours()),2),l=c(String(d.getMinutes()),2),
c=c(String(d.getSeconds()),2);return k+e+m+h+l+c+"Z"};this.zeroPadding=function(a,b){return a.length>=b?a:Array(b-a.length+1).join("0")+a};this.getString=function(){return this.s};this.setString=function(a){this.hTLV=null;this.isModified=!0;this.s=a;this.hV=stohex(this.s)};this.setByDateValue=function(a,b,c,d,k,e){a=new Date(Date.UTC(a,b-1,c,d,k,e,0));this.setByDate(a)};this.getFreshValueHex=function(){return this.hV}};w.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractStructured=
function(a){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(a){this.hTLV=null;this.isModified=!0;this.asn1Array=a};this.appendASN1Object=function(a){this.hTLV=null;this.isModified=!0;this.asn1Array.push(a)};this.asn1Array=[];"undefined"!=typeof a&&"undefined"!=typeof a.array&&(this.asn1Array=a.array)};w.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object);KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this);
this.hT="01";this.hTLV="0101ff"};w.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object);KJUR.asn1.DERInteger=function(b){KJUR.asn1.DERInteger.superclass.constructor.call(this);this.hT="02";this.setByBigInteger=function(a){this.hTLV=null;this.isModified=!0;this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(a)};this.setByInteger=function(b){b=new a(String(b),10);this.setByBigInteger(b)};this.setValueHex=function(a){this.hV=a};this.getFreshValueHex=function(){return this.hV};"undefined"!=typeof b&&
("undefined"!=typeof b.bigint?this.setByBigInteger(b.bigint):"undefined"!=typeof b["int"]?this.setByInteger(b["int"]):"undefined"!=typeof b.hex&&this.setValueHex(b.hex))};w.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object);KJUR.asn1.DERBitString=function(a){KJUR.asn1.DERBitString.superclass.constructor.call(this);this.hT="03";this.setHexValueIncludingUnusedBits=function(a){this.hTLV=null;this.isModified=!0;this.hV=a};this.setUnusedBitsAndHexValue=function(a,b){if(0>a||7<a)throw"unused bits shall be from 0 to 7: u = "+
a;this.hTLV=null;this.isModified=!0;this.hV="0"+a+b};this.setByBinaryString=function(a){a=a.replace(/0+$/,"");var b=8-a.length%8;8==b&&(b=0);for(var c=0;b>=c;c++)a+="0";for(var d="",c=0;c<a.length-1;c+=8){var e=a.substr(c,8),e=parseInt(e,2).toString(16);1==e.length&&(e="0"+e);d+=e}this.hTLV=null;this.isModified=!0;this.hV="0"+b+d};this.setByBooleanArray=function(a){for(var b="",c=0;c<a.length;c++)b+=1==a[c]?"1":"0";this.setByBinaryString(b)};this.newFalseArray=function(a){for(var b=Array(a),c=0;a>
c;c++)b[c]=!1;return b};this.getFreshValueHex=function(){return this.hV};"undefined"!=typeof a&&("undefined"!=typeof a.hex?this.setHexValueIncludingUnusedBits(a.hex):"undefined"!=typeof a.bin?this.setByBinaryString(a.bin):"undefined"!=typeof a.array&&this.setByBooleanArray(a.array))};w.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object);KJUR.asn1.DEROctetString=function(a){KJUR.asn1.DEROctetString.superclass.constructor.call(this,a);this.hT="04"};w.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString);
KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this);this.hT="05";this.hTLV="0500"};w.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object);KJUR.asn1.DERObjectIdentifier=function(b){var c=function(a){a=a.toString(16);return 1==a.length&&(a="0"+a),a};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);this.hT="06";this.setValueHex=function(a){this.hTLV=null;this.isModified=!0;this.s=null;this.hV=a};this.setValueOidString=function(b){if(!b.match(/^[0-9.]+$/))throw"malformed oid string: "+
b;var d="";b=b.split(".");var k=40*parseInt(b[0])+parseInt(b[1]),d=d+c(k);b.splice(0,2);for(k=0;k<b.length;k++){var e="",m=(new a(b[k],10)).toString(2),h=7-m.length%7;7==h&&(h=0);for(var r="",l=0;h>l;l++)r+="0";m=r+m;for(l=0;l<m.length-1;l+=7)h=m.substr(l,7),l!=m.length-7&&(h="1"+h),e+=c(parseInt(h,2));d+=e}this.hTLV=null;this.isModified=!0;this.s=null;this.hV=d};this.setValueName=function(a){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[a])throw"DERObjectIdentifier oidName undefined: "+
a;this.setValueOidString(KJUR.asn1.x509.OID.name2oidList[a])};this.getFreshValueHex=function(){return this.hV};"undefined"!=typeof b&&("undefined"!=typeof b.oid?this.setValueOidString(b.oid):"undefined"!=typeof b.hex?this.setValueHex(b.hex):"undefined"!=typeof b.name&&this.setValueName(b.name))};w.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object);KJUR.asn1.DERUTF8String=function(a){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,a);this.hT="0c"};w.extend(KJUR.asn1.DERUTF8String,
KJUR.asn1.DERAbstractString);KJUR.asn1.DERNumericString=function(a){KJUR.asn1.DERNumericString.superclass.constructor.call(this,a);this.hT="12"};w.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERPrintableString=function(a){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,a);this.hT="13"};w.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERTeletexString=function(a){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,a);this.hT=
"14"};w.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERIA5String=function(a){KJUR.asn1.DERIA5String.superclass.constructor.call(this,a);this.hT="16"};w.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERUTCTime=function(a){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,a);this.hT="17";this.setByDate=function(a){this.hTLV=null;this.isModified=!0;this.date=a;this.s=this.formatDate(this.date,"utc");this.hV=stohex(this.s)};"undefined"!=typeof a&&
("undefined"!=typeof a.str?this.setString(a.str):"undefined"!=typeof a.hex?this.setStringHex(a.hex):"undefined"!=typeof a.date&&this.setByDate(a.date))};w.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERGeneralizedTime=function(a){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,a);this.hT="18";this.setByDate=function(a){this.hTLV=null;this.isModified=!0;this.date=a;this.s=this.formatDate(this.date,"gen");this.hV=stohex(this.s)};"undefined"!=typeof a&&("undefined"!=
typeof a.str?this.setString(a.str):"undefined"!=typeof a.hex?this.setStringHex(a.hex):"undefined"!=typeof a.date&&this.setByDate(a.date))};w.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERSequence=function(a){KJUR.asn1.DERSequence.superclass.constructor.call(this,a);this.hT="30";this.getFreshValueHex=function(){for(var a="",b=0;b<this.asn1Array.length;b++)a+=this.asn1Array[b].getEncodedHex();return this.hV=a,this.hV}};w.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured);
KJUR.asn1.DERSet=function(a){KJUR.asn1.DERSet.superclass.constructor.call(this,a);this.hT="31";this.getFreshValueHex=function(){for(var a=[],b=0;b<this.asn1Array.length;b++)a.push(this.asn1Array[b].getEncodedHex());return a.sort(),this.hV=a.join(""),this.hV}};w.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERTaggedObject=function(a){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);this.hT="a0";this.hV="";this.isExplicit=!0;this.asn1Object=null;this.setASN1Object=function(a,
b,c){this.hT=b;this.isExplicit=a;this.asn1Object=c;this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=c.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,b),this.isModified=!1)};this.getFreshValueHex=function(){return this.hV};"undefined"!=typeof a&&("undefined"!=typeof a.tag&&(this.hT=a.tag),"undefined"!=typeof a.explicit&&(this.isExplicit=a.explicit),"undefined"!=typeof a.obj&&(this.asn1Object=a.obj,this.setASN1Object(this.isExplicit,
this.hT,this.asn1Object)))};w.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);(function(a){var b;window.Hex={decode:function(c){var d;if(b===a){var k="0123456789ABCDEF";b=[];for(d=0;16>d;++d)b[k.charAt(d)]=d;k=k.toLowerCase();for(d=10;16>d;++d)b[k.charAt(d)]=d;for(d=0;9>d;++d)b[" \f\n\r\t\u00c2 \u2028\u2029".charAt(d)]=-1}var k=[],e=0,m=0;for(d=0;d<c.length;++d){var h=c.charAt(d);if("="==h)break;if(h=b[h],-1!=h){if(h===a)throw"Illegal character at offset "+d;e|=h;2<=++m?(k[k.length]=e,e=0,
m=0):e<<=4}}if(m)throw"Hex encoding incomplete: 4 bits missing";return k}}})();(function(a){var b,c={decode:function(c){var d;if(b===a){b=[];for(d=0;64>d;++d)b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d)]=d;for(d=0;10>d;++d)b["= \f\n\r\t\u00c2 \u2028\u2029".charAt(d)]=-1}var f=[],e=0,h=0;for(d=0;d<c.length;++d){var l=c.charAt(d);if("="==l)break;if(l=b[l],-1!=l){if(l===a)throw"Illegal character at offset "+d;e|=l;4<=++h?(f[f.length]=e>>16,f[f.length]=e>>8&255,f[f.length]=
255&e,e=0,h=0):e<<=6}}switch(h){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:f[f.length]=e>>10;break;case 3:f[f.length]=e>>16,f[f.length]=e>>8&255}return f},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(a){var b=c.re.exec(a);if(b)if(b[1])a=b[1];else{if(!b[2])throw"RegExp out of sync";a=b[2]}return c.decode(a)}};window.SCBase64=c})();(function(a){function b(a,c){a instanceof b?(this.enc=a.enc,
this.pos=a.pos):(this.enc=a,this.pos=c)}function c(a,b,d,e,f){this.stream=a;this.header=b;this.length=d;this.tag=e;this.sub=f}var d={tag:function(a,b){var c=document.createElement(a);return c.className=b,c},text:function(a){return document.createTextNode(a)}};b.prototype.get=function(b){if(b===a&&(b=this.pos++),b>=this.enc.length)throw"Requesting byte offset "+b+" on a stream of length "+this.enc.length;return this.enc[b]};b.prototype.hexDigits="0123456789ABCDEF";b.prototype.hexByte=function(a){return this.hexDigits.charAt(a>>
4&15)+this.hexDigits.charAt(15&a)};b.prototype.hexDump=function(a,b,c){for(var d="";b>a;++a)if(d+=this.hexByte(this.get(a)),!0!==c)switch(15&a){case 7:d+="  ";break;case 15:d+="\n";break;default:d+=" "}return d};b.prototype.parseStringISO=function(a,b){for(var c="",d=a;b>d;++d)c+=String.fromCharCode(this.get(d));return c};b.prototype.parseStringUTF=function(a,b){for(var c="",d=a;b>d;)var e=this.get(d++),c=c+String.fromCharCode(128>e?e:191<e&&224>e?(31&e)<<6|63&this.get(d++):(15&e)<<12|(63&this.get(d++))<<
6|63&this.get(d++));return c};b.prototype.parseStringBMP=function(a,b){for(var c="",d=a;b>d;d+=2)var e=this.get(d),f=this.get(d+1),c=c+String.fromCharCode((e<<8)+f);return c};b.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;b.prototype.parseTime=function(a,b){var c=this.parseStringISO(a,b),d=this.reTime.exec(c);return d?(c=d[1]+"-"+d[2]+"-"+d[3]+" "+d[4],d[5]&&(c+=":"+d[5],
d[6]&&(c+=":"+d[6],d[7]&&(c+="."+d[7]))),d[8]&&(c+=" UTC","Z"!=d[8]&&(c+=d[8],d[9]&&(c+=":"+d[9]))),c):"Unrecognized time: "+c};b.prototype.parseInteger=function(a,b){var c=b-a;if(4<c){var c=c<<3,d=this.get(a);if(0===d)c-=8;else for(;128>d;)d<<=1,--c;return"("+c+" bit)"}c=0;for(d=a;b>d;++d)c=c<<8|this.get(d);return c};b.prototype.parseBitString=function(a,b){var c=this.get(a),d=(b-a-1<<3)-c,e="("+d+" bit)";if(20>=d)for(var f=c,e=e+" ",c=b-1;c>a;--c){for(d=this.get(c);8>f;++f)e+=d>>f&1?"1":"0";f=0}return e};
b.prototype.parseOctetString=function(a,b){var c=b-a,d="("+c+" byte) ";100<c&&(b=a+100);for(var e=a;b>e;++e)d+=this.hexByte(this.get(e));return 100<c&&(d+="\u00e2\u20ac\u00a6"),d};b.prototype.parseOID=function(a,b){for(var c="",d=0,e=0,f=a;b>f;++f){var g=this.get(f);(d=d<<7|127&g,e+=7,128&g)||(""===c?(c=80>d?40>d?0:1:2,c=c+"."+(d-40*c)):c+="."+(31<=e?"bigint":d),d=e=0)}return c};c.prototype.typeName=function(){if(this.tag===a)return"unknown";var b=this.tag>>6,c=(this.tag>>5&1,31&this.tag);switch(b){case 0:switch(c){case 0:return"EOC";
case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";
case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+c.toString(16)}case 1:return"Application_"+c.toString(16);case 2:return"["+c+"]";case 3:return"Private_"+c.toString(16)}};c.prototype.reSeemsASCII=/^[ -~]+$/;c.prototype.content=function(){if(this.tag===a)return null;var b=this.tag>>6,c=31&this.tag,d=this.posContent(),e=
Math.abs(this.length);if(0!==b){if(null!==this.sub)return"("+this.sub.length+" elem)";b=this.stream.parseStringISO(d,d+Math.min(e,100));return this.reSeemsASCII.test(b)?b.substring(0,200)+(200<b.length?"\u00e2\u20ac\u00a6":""):this.stream.parseOctetString(d,d+e)}switch(c){case 1:return 0===this.stream.get(d)?"false":"true";case 2:return this.stream.parseInteger(d,d+e);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(d,d+e);case 4:return this.sub?"("+this.sub.length+" elem)":
this.stream.parseOctetString(d,d+e);case 6:return this.stream.parseOID(d,d+e);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(d,d+e);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(d,d+e);case 30:return this.stream.parseStringBMP(d,d+e);case 23:case 24:return this.stream.parseTime(d,d+e)}return null};c.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+
",sub:"+(null===this.sub?"null":this.sub.length)+"]"};c.prototype.print=function(b){if(b===a&&(b=""),document.writeln(b+this),null!==this.sub){b+="  ";for(var c=0,d=this.sub.length;d>c;++c)this.sub[c].print(b)}};c.prototype.toPrettyString=function(b){b===a&&(b="");var c=b+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(c+="+"),c+=this.length,32&this.tag?c+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(c+=" (encapsulates)"),c+="\n",null!==this.sub){b+="  ";for(var d=0,e=this.sub.length;e>
d;++d)c+=this.sub[d].toPrettyString(b)}return c};c.prototype.toDOM=function(){var a=d.tag("div","node");a.asn1=this;var b=d.tag("div","head"),c=this.typeName().replace(/_/g," ");b.innerHTML=c;var e=this.content();if(null!==e){var e=String(e).replace(/</g,"&lt;"),f=d.tag("span","preview");f.appendChild(d.text(e));b.appendChild(f)}a.appendChild(b);this.node=a;this.head=b;f=d.tag("div","value");(c="Offset: "+this.stream.pos+"<br/>",c+="Length: "+this.header+"+",c+=0<=this.length?this.length:-this.length+
" (undefined)",32&this.tag?c+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(c+="<br/>(encapsulates)"),null!==e&&(c+="<br/>Value:<br/><b>"+e+"</b>","object"==typeof oids&&6==this.tag))&&(e=oids[e])&&(e.d&&(c+="<br/>"+e.d),e.c&&(c+="<br/>"+e.c),e.w&&(c+="<br/>(warning!)"));f.innerHTML=c;a.appendChild(f);c=d.tag("div","sub");if(null!==this.sub)for(e=0,f=this.sub.length;f>e;++e)c.appendChild(this.sub[e].toDOM());return a.appendChild(c),b.onclick=function(){a.className="node collapsed"==
a.className?"node":"node collapsed"},a};c.prototype.posStart=function(){return this.stream.pos};c.prototype.posContent=function(){return this.stream.pos+this.header};c.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)};c.prototype.fakeHover=function(a){this.node.className+=" hover";a&&(this.head.className+=" hover")};c.prototype.fakeOut=function(a){var b=/ ?hover/;this.node.className=this.node.className.replace(b,"");a&&(this.head.className=this.head.className.replace(b,
""))};c.prototype.toHexDOM_sub=function(a,b,c,e,f){e>=f||(b=d.tag("span",b),b.appendChild(d.text(c.hexDump(e,f))),a.appendChild(b))};c.prototype.toHexDOM=function(b){var c=d.tag("span","hex");if(b===a&&(b=c),this.head.hexNode=c,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},c.asn1=this,c.onmouseover=function(){var a=!b.selected;a&&(b.selected=this.asn1,this.className="hexCurrent");this.asn1.fakeHover(a)},c.onmouseout=
function(){var a=b.selected==this.asn1;this.asn1.fakeOut(a);a&&(b.selected=null,this.className="hex")},this.toHexDOM_sub(c,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(c,0<=this.length?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)c.appendChild(d.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(0<this.sub.length){var e=this.sub[0],f=this.sub[this.sub.length-1];this.toHexDOM_sub(c,"intro",this.stream,this.posContent(),e.posStart());
for(var e=0,g=this.sub.length;g>e;++e)c.appendChild(this.sub[e].toHexDOM(b));this.toHexDOM_sub(c,"outro",this.stream,f.posEnd(),this.posEnd())}return c};c.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)};c.decodeLength=function(a){var b=a.get(),c=127&b;if(c==b)return c;if(3<c)throw"Length over 24 bits not supported at position "+(a.pos-1);if(0===c)return-1;for(var d=b=0;c>d;++d)b=b<<8|a.get();return b};c.hasContent=function(a,d,e){if(32&a)return!0;if(3>
a||4<a)return!1;var h=new b(e);3==a&&h.get();if(h.get()>>6&1)return!1;try{var l=c.decodeLength(h);return h.pos-e.pos+l==d}catch(r){return!1}};c.decode=function(a){a instanceof b||(a=new b(a,0));var d=new b(a),e=a.get(),h=c.decodeLength(a),l=a.pos-d.pos,r=null;if(c.hasContent(e,h,a)){var n=a.pos;if(3==e&&a.get(),r=[],0<=h){for(var p=n+h;a.pos<p;)r[r.length]=c.decode(a);if(a.pos!=p)throw"Content size is not correct for container starting at offset "+n;}else try{for(;;){p=c.decode(a);if(0===p.tag)break;
r[r.length]=p}h=n-a.pos}catch(q){throw"Exception while decoding undefined length content: "+q;}}else a.pos+=h;return new c(d,l,h,e,r)};c.test=function(){for(var a=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],d=0,e=a.length;e>d;++d){var h=new b(a[d].value,0),h=c.decodeLength(h);h!=a[d].expected&&document.write("In test["+d+"] expected "+a[d].expected+" got "+h+"\n")}};window.ASN1=c})();ASN1.prototype.getHexStringValue=function(){return this.toHexString().substr(2*
this.header,2*this.length)};t.prototype.parseKey=function(a){try{var b=0,c=0,d=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(a)?Hex.decode(a):SCBase64.unarmor(a),e=ASN1.decode(d);if(9===e.sub.length){b=e.sub[1].getHexStringValue();this.n=A(b,16);c=e.sub[2].getHexStringValue();this.e=parseInt(c,16);var h=e.sub[3].getHexStringValue();this.d=A(h,16);var l=e.sub[4].getHexStringValue();this.p=A(l,16);var n=e.sub[5].getHexStringValue();this.q=A(n,16);var p=e.sub[6].getHexStringValue();this.dmp1=A(p,16);var q=
e.sub[7].getHexStringValue();this.dmq1=A(q,16);var t=e.sub[8].getHexStringValue();this.coeff=A(t,16)}else{if(2!==e.sub.length)return!1;var x=e.sub[1].sub[0],b=x.sub[0].getHexStringValue();this.n=A(b,16);c=x.sub[1].getHexStringValue();this.e=parseInt(c,16)}return!0}catch(w){return!1}};t.prototype.getPrivateBaseKey=function(){var a={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),
new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};return(new KJUR.asn1.DERSequence(a)).getEncodedHex()};t.prototype.getPrivateBaseKeyB64=function(){return N(this.getPrivateBaseKey())};t.prototype.getPublicBaseKey=function(){var a={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},b=new KJUR.asn1.DERSequence(a),
a={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]},a={hex:"00"+(new KJUR.asn1.DERSequence(a)).getEncodedHex()},a=new KJUR.asn1.DERBitString(a),a={array:[b,a]};return(new KJUR.asn1.DERSequence(a)).getEncodedHex()};t.prototype.getPublicBaseKeyB64=function(){return N(this.getPublicBaseKey())};t.prototype.wordwrap=function(a,b){return(b=b||64,a)?a.match(RegExp("(.{1,"+b+"})( +|$\n?)|(.{1,"+b+"})","g")).join("\n"):a};t.prototype.getPrivateKey=function(){var a=
"-----BEGIN RSA PRIVATE KEY-----\n";return a+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",a+"-----END RSA PRIVATE KEY-----"};t.prototype.getPublicKey=function(){var a="-----BEGIN PUBLIC KEY-----\n";return a+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",a+"-----END PUBLIC KEY-----"};t.prototype.hasPublicKeyProperty=function(a){return a=a||{},a.hasOwnProperty("n")&&a.hasOwnProperty("e")};t.prototype.hasPrivateKeyProperty=function(a){return a=a||{},a.hasOwnProperty("n")&&a.hasOwnProperty("e")&&
a.hasOwnProperty("d")&&a.hasOwnProperty("p")&&a.hasOwnProperty("q")&&a.hasOwnProperty("dmp1")&&a.hasOwnProperty("dmq1")&&a.hasOwnProperty("coeff")};t.prototype.parsePropertiesFrom=function(a){this.n=a.n;this.e=a.e;a.hasOwnProperty("d")&&(this.d=a.d,this.p=a.p,this.q=a.q,this.dmp1=a.dmp1,this.dmq1=a.dmq1,this.coeff=a.coeff)};var ca=function(a){t.call(this);a&&("string"==typeof a?this.parseKey(a):(this.hasPrivateKeyProperty(a)||this.hasPublicKeyProperty(a))&&this.parsePropertiesFrom(a))};ca.prototype=
new t;ca.prototype.constructor=ca;w=function(a){a=a||{};this.default_key_size=parseInt(a.default_key_size)||1024;this.default_public_exponent=a.default_public_exponent||"010001";this.log=a.log||!1;this.key=null};w.prototype.setKey=function(a){this.log&&this.key&&console.warn("A key was already set, overriding existing.");this.key=new ca(a)};w.prototype.setPrivateKey=function(a){this.setKey(a)};w.prototype.setPublicKey=function(a){this.setKey(a)};w.prototype.decrypt=function(a){try{return this.getKey().decrypt(T(a))}catch(b){return!1}};
w.prototype.encrypt=function(a){try{return N(this.getKey().encrypt(a))}catch(b){return!1}};w.prototype.getKey=function(a){if(!this.key){if(this.key=new ca,a&&"[object Function]"==={}.toString.call(a))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,a);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key};w.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()};w.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()};
w.prototype.getPublicKey=function(){return this.getKey().getPublicKey()};w.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()};b.JSEncrypt=w})(ua);var Fa=ua.JSEncrypt,H=null;try{H=new G("SC-ERROR","sc-config",void 0!=superCapaVersion?superCapaVersion:"5.2")}catch(Ja){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(Ja))}(function(){TG.setTaggerEvent("LeadBrutoC2C",
"Conversiones C2C capa","Lead bruto C2C",function(){return s.products},1,null,[22,25]);TG.setTaggerEvent("ConversionC2C","Conversiones C2C capa","Hablamos con el cliente",function(){return s.products},1,null,[22,25]);var b=D.getInstance();b.creaEstado("CALL SEND").addFuncionalidad(function(){TG.getTaggerEvent("LeadBrutoC2C").execute()});b.creaEstado("CML SEND").addFuncionalidad(function(){TG.getTaggerEvent("LeadBrutoC2C").execute()});b.creaEstado("CLIENT ANSWER").addFuncionalidad(function(){TG.getTaggerEvent("ConversionC2C").execute()});
b.creaEstado("CALL VALIDATION FAILED").addFuncionalidad(function(a,b,d,e){TG.setTaggerEvent("ErroresCRM","Seguimiento de errores","CAPA_CRM_ERROR|"+e+"|Causa:"+b+"|"+(d.reason?d.reason:""),window.location.href,null,null,[11,22,36,50,43]).execute()});b.creaEstado("CML VALIDATION FAILED").addFuncionalidad(function(a,b,d,e){TG.setTaggerEvent("ErroresCRM","Seguimiento de errores","CAPA_CRM_ERROR|"+e+"|Causa:"+b+"|"+(d.reason?d.reason:""),window.location.href,null,null,[11,22,36,50,43]).execute()});b.creaEstado("CALL NOT ESTABLISHED").addFuncionalidad(function(a,
b,d,e){TG.setTaggerEvent("ErroresCRM","Seguimiento de errores","CAPA_CRM_ERROR|"+e+"|Causa:"+b+"|"+(d.reason?d.reason:""),window.location.href,null,null,[11,22,36,50,43]).execute()});b.creaEstado("GENERIC FAILURE").addFuncionalidad(function(a,b,d,e){TG.setTaggerEvent("ErroresCRM","Seguimiento de errores","CAPA_CRM_ERROR|"+e+"|Causa:"+b+"|"+(d.reason?d.reason:""),window.location.href,null,null,[11,22,36,50,43]).execute()})})();window.SC_ServerCallBack=function(b){console.debug(b)};var O=new Q,q=null,
ia=null,ja=null,va=null,V=!1,ka=null,wa=!0,Z=(new Date).getTime(),la=!1,N=new function(){var b=void 0!=superCapaVersion?superCapaVersion:"5.142",a=new Q;this.urlJSON_backup=this.urlJSON="";this.debug=null;try{this.debug=new G("SC-ERROR","ManejadorCampania",b)}catch(c){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),console.debug(c))}this.cargaJSON=function(){d(this,this.urlJSON)};var d=function(a,
b){if(!b)return null;$.ajax({type:"POST",url:b,dataType:"jsonp"}).complete(function(c,e){"parsererror"!=e&&"ok"!=e&&"OK"!=e&&(b==a.urlJSON?(a.debug.sendError({name:"(critico)(inicializacion)(carga)",code:"SC.ManejadorCampania.loadFromJSON",message:"Error cargando fichero JSON-> "+b+". textStatus == ("+e+") Se intentar\u00e1 cargar el fichero backup-> "+a.urlJSON_backup+"."}),d(a.urlJSON_backup)):a.debug.sendError({name:"(critico)(inicializacion)(carga)",code:"SC.ManejadorCampania.loadFromJSON",message:"Error cargando fichero JSON estable (usado como backup)-> "+
b+". textStatus == '"+e+"'."}))})};this.generateFromData=function(b){var c=this,d=null;c.debug&&c.debug.isOn()&&(console.log("___generateFromData___"),console.debug(b));try{if($.each(b,function(b,n){var q=a.getParametroSC(b);if(q&&($.each(n,function(a,n){if(a==q&&(d=e(c,a,b,n),null!=d))return!1}),d instanceof L))return!1}),d instanceof L)return d}catch(q){c.debug.sendError({name:"(critico)(inicializacion)(JavaScript)",code:"SC.ManejadorCampania.generateFromData",message:"Error JavaScript. Name -> "+
q.name+" | Message -> "+q.message,error:q},!0)}return null};this.getCampaniaFromData=function(a,b,c){if(!b||!c)return null;a=a[b];return a?(a=a[c])?e(this,c,b,a):null:null};var e=function(a,b,c,d){if(!d)return null;var e=null,q=null;d.c2c&&0<d.c2c.length?(e=F.getInstance().balanceoC2C(d.c2c,d.balanceo),(q=e[0])&&1<e.length&&q.setParametro(e[1]),e="object"==typeof q):e=!1;if(d.telefono||e)return new L(b,c,q,d.telefono);a.debug.sendError({name:"(informativo)(inicializacion)",code:"SC.Manejador.crearCampania",
message:"No hay 900 ni C2C que usar para esta campa\u00f1a, se intentar\u00e1 localizar otra"},!0);return null}};O.isExterna()?(N.urlJSON="//www.movistar.es/estaticos/json/SC-v5.json",N.urlJSON_backup="//www.movistar.es/estaticos/json/SC-v5.json"):(N.urlJSON="/estaticos/json/SC-v5.json",N.urlJSON_backup="/estaticos/json/SC-v5.json");var xa=null,X=null,C=null;try{C=new G("SC-ERROR","SuperCapa",ha)}catch(Ka){"undefined"!=typeof console&&(console.log("No se puede inicalizar la variable de depuraci\u00f3n. No habr\u00e1 informaci\u00f3n de depuraci\u00f3n"),
console.debug(Ka))}C.isOn()&&console.log("___SUPERCAPA V: "+ha+"___");if(!V)try{N.cargaJSON(),Ga(),Ha(C)}catch(ma){C.sendError({name:"(critico)(inicializacion)(JavaScript)",code:"SC.SuperCapa.start",message:"Error JavaScript. Name -> "+ma.name+" | Message -> "+ma.message,error:ma},!0)}return{lanzar:function(b,a,c){try{if(q&&q instanceof L&&null!=q.getC2C())return q.getC2C().lanzar(b,a,c)}catch(d){C.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"SC.SuperCapa.lanzar",message:"Error JavaScript. Name -> "+
d.name+" | Message -> "+d.message,error:d},!0)}return!1},generateFromJSON:function(b){var a=!1;if(!b||V)return!1;ia=q=N.generateFromData(b);V=!0;ka=b;q instanceof L&&(q.start(),a=!0);if("function"==typeof X)try{X()}catch(c){C.sendError({name:"(critico)(inicializacion)(JavaScript)",code:"SC.SuperCapa.generateFromJSON",message:"Error JavaScript. Name -> "+c.name+" | Message -> "+c.message,error:c},!1)}return a},establecerCampaniaAlternativa:function(b,a){return b&&a?V&&null==ia&&(ja=q=N.getCampaniaFromData(ka,
b,a),null!=q)?(q.start(),!0):!1:!1},establecerConfiguracionAlternativa:function(b,a,c){return b&&a?V&&null==ia&&null==ja&&!ka&&(b=F.getInstance().getC2C(b),b.setParametro(c),va=q=new L("alternativa","alternativa",b,a),q instanceof L)?(q.start(),!0):!1:!1},callback:function(b){if(!q||"function"!=typeof b)return!1;var a=q.getC2C();if(!a)return!1;var a=a.getTipologiasFunnelAceptadas(),c=null;xa=b;for(b=0;b<a.length;b++)(c=D.getInstance().getTipologiaFunnel(a[b]))&&c.addFuncionalidad(xa)},getIdC2C:function(){if(q){var b=
q.getC2C();if(null!=b)return b.getId()}return null},getIdCampania:function(){return q?q.getId():null},getUrlParamName:function(){return q?q.getUrlParamName():null},getLastIdLead:function(){var b=null;try{b=F.getInstance().getLastIdLead()}catch(a){C.sendError({name:"(critico)(inicializacion)(JavaScript)",code:"SC.SuperCapa.getLastIdLead",message:"Error JavaScript. Name -> "+a.name+" | Message -> "+a.message,error:a},!0)}return b},getTelefono:function(){return q?q.getTelefono():null},getFuncionalidadC2C:function(){if(q){var b=
q.getC2C();if(b)return b.getFuncionalidadesAceptadas()}return null},setPreAbrir:function(b){if(!q)return C.sendError({name:"(critico)(integridad)",code:"SC.SuperCapa.setPreAbrir",message:"No hay una campa\u00f1a definida y por lo tanto no se puede asociar un metodo"},!1),!1;if("function"==typeof b){var a=q.getC2C();a&&(a.preAbrir=b)}},setPostAbrir:function(b){if(!q)return C.sendError({name:"(critico)(integridad)",code:"SC.SuperCapa.setPostAbrir",message:"No hay una campa\u00f1a definida y por lo tanto no se puede asociar un metodo"},
!1),!1;if("function"==typeof b){var a=q.getC2C();a&&(a.postAbrir=b)}},setUsoModal:function(b){"boolean"==typeof b&&(wa=b)},isModalActivo:function(){return wa},onReady:function(b){if("function"!=typeof b)return!1;X=b;if(V)try{X()}catch(a){C.sendError({name:"(informativo)(inicializacion)(JavaScript)",code:"SC.SuperCapa.generateFromJSON",message:"Error JavaScript. Name -> "+a.name+" | Message -> "+a.message,error:a},!1)}},lanzarModalC2C:function(){O.lanzaModalForm()},configurarBotones:function(b,a){try{q.start();
var c=null,c=a?$(a):b?$(b).find(".sc-btn-c2c"):$(".sc-btn-c2c"),d=q.getC2C().getFuncionalidadesAceptadas()[0];"completo"==d?c.click(function(){SuperCapa.getInstance().lanzar(d)}):c.click(function(){SuperCapa.getInstance().lanzarModalC2C()})}catch(e){C&&C.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"SC.SuperCapa.configurarBotones",message:"Error JavaScript. Name -> "+e.name+" | Message -> "+e.message,error:e},!0)}},configurarFormularios:function(b,a){try{var c=$("body");b&&(c=$(b));q.start();
var d=q.getC2C().getFuncionalidadesAceptadas();a&&c.find('[class*="sc-form"]').hide();if(d)for(var e=0;e<d.length;e++)(function(){var b=c.find(".sc-form-"+d[e]),n=d[e]+"";b.find(".sc-btn-c2c").click(function(a){"completo"==n?SC.lanzar(n):O.validarFormulario(b,!0)&&SC.lanzar(n,O.getValues(b))});a&&b.show()})()}catch(n){C&&C.sendError({name:"(critico)(ejecucion)(JavaScript)",code:"SC.SuperCapa.configurarFormularios",message:"Error JavaScript. Name -> "+n.name+" | Message -> "+n.message,error:n},!0)}},
configurarTelefono:function(){q.start()},getVersion:function(){return ha+""},validarConfiguracion:function(b){var a=!0;console.log("___Validaciones SuperCapa___");window.s?(window.s.products||(b&&(console.log("[Importante] La variable global 's.products' no est\u00e1 definida o es incorrecta"),console.debug(window.s.products)),a=!1),window.s.pageName||(b&&(console.log("[Importante] La variable global 's.pageName' no est\u00e1 definida o es incorrecta"),console.debug(window.s.pageName)),a=!1)):(b&&
(console.log("[Importante] La variable global 's' no est\u00e1 definida o es incorrecta"),console.debug(window.s)),a=!1);!ja&&b&&console.log("[Opcional] No hay configurada ninguna campa\u00f1a alternativa. Es recomendable establecerla. 'SC.establecerCampaniaAlternativa()'");!va&&b&&console.log("[Opcional] No hay ninguna configuraci\u00f3n alternativa. Es recomendable establecerla. 'SC.establecerConfiguracionAlternativa()'");return a},lanzarC2CVolador:function(){var b=null;O.isMobile()||(b=new ea("C2CVolador",
"url",{url:"/estaticos/html/modal/c2c_volador.html"}),b.loadModal(function(){SuperCapa.getInstance().configurarFormularios("#C2CVolador",!0)}))},startC2CVolador:function(b){function a(){la&&setTimeout(function(){Z+b<(new Date).getTime()?(SuperCapa.getInstance().lanzarC2CVolador(),c=c?c+1:1,O.setCookie("SC-C2CVOLADOR",c)):(C&&C.isOn()&&(console.log("___StartC2CVolador___"),console.log("Esperando...")),a())},b/4)}if(!b||"number"!=typeof b||0>b)b=1E4;la=!0;var c=parseInt(O.getCookie("SC-C2CVOLADOR")+
"");if(2<=c)return C&&C.isOn()&&(console.log("___StartC2CVolador___"),console.log("Ya se lanz\u00f3: 2 veces."),console.log("Cookie: SC-C2CVOLADOR")),!1;Z=(new Date).getTime();$("body").mousemove(function(){Z=(new Date).getTime()});$("body").keypress(function(){Z=(new Date).getTime()});a();return!0},stopC2CVolaodr:function(){la=!1},startDebug:function(){C.start();D.getInstance().startDebug();F.getInstance().startDebug();N.debug.start();q instanceof L&&q.debug.stop();H=new G("SC-ERROR","sc-config");
H.start()},stopDebug:function(){C.stop();D.getInstance().stopDebug();F.getInstance().stopDebug();N.debug.stop();q instanceof L&&q.debug.stop();H=new G("SC-ERROR","sc-config");H.stop()},isC2CActivo:function(){if(!q)return!1;var b=q.getC2C();return b?b.isActivo():!1},isTelefonoActivo:function(){return q?q.isTelefonoActivo():!1},isCargaFinalizada:function(){return V}}}var R=null;return{getInstance:function(){R||(R=Y());return R}}}(),SC=SuperCapa.getInstance();